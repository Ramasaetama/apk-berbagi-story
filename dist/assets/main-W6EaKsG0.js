var ps=o=>{throw TypeError(o)};var kn=(o,n,s)=>n.has(o)||ps("Cannot "+s);var Pt=(o,n,s)=>(kn(o,n,"read from private field"),s?s.call(o):n.get(o)),Ue=(o,n,s)=>n.has(o)?ps("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(o):n.set(o,s),bi=(o,n,s,l)=>(kn(o,n,"write to private field"),l?l.call(o,s):n.set(o,s),s),gs=(o,n,s)=>(kn(o,n,"access private method"),s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(u){if(u.ep)return;u.ep=!0;const h=s(u);fetch(u.href,h)}})();/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function Ds(o,n,s){if(typeof o=="function"?o===n:o.has(n))return arguments.length<3?n:s;throw new TypeError("Private element is not present on this object")}function ul(o,n){if(n.has(o))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ws(o,n){return o.get(Ds(o,n))}function dl(o,n,s){ul(o,n),n.set(o,s)}function hl(o,n,s){return o.set(Ds(o,n),s),s}const fl=100,k={},ml=()=>{k.previousActiveElement instanceof HTMLElement?(k.previousActiveElement.focus(),k.previousActiveElement=null):document.body&&document.body.focus()},pl=o=>new Promise(n=>{if(!o)return n();const s=window.scrollX,l=window.scrollY;k.restoreFocusTimeout=setTimeout(()=>{ml(),n()},fl),window.scrollTo(s,l)}),Ns="swal2-",gl=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],g=gl.reduce((o,n)=>(o[n]=Ns+n,o),{}),wl=["success","warning","info","question","error"],ki=wl.reduce((o,n)=>(o[n]=Ns+n,o),{}),Zs="SweetAlert2:",Nn=o=>o.charAt(0).toUpperCase()+o.slice(1),nt=o=>{console.warn(`${Zs} ${typeof o=="object"?o.join(" "):o}`)},se=o=>{console.error(`${Zs} ${o}`)},vs=[],vl=o=>{vs.includes(o)||(vs.push(o),nt(o))},Rs=(o,n=null)=>{vl(`"${o}" is deprecated and will be removed in the next major release.${n?` Use "${n}" instead.`:""}`)},Mi=o=>typeof o=="function"?o():o,Zn=o=>o&&typeof o.toPromise=="function",qe=o=>Zn(o)?o.toPromise():Promise.resolve(o),Rn=o=>o&&Promise.resolve(o)===o,ot=()=>document.body.querySelector(`.${g.container}`),je=o=>{const n=ot();return n?n.querySelector(o):null},mt=o=>je(`.${o}`),z=()=>mt(g.popup),xe=()=>mt(g.icon),_l=()=>mt(g["icon-content"]),Fs=()=>mt(g.title),Fn=()=>mt(g["html-container"]),Hs=()=>mt(g.image),Hn=()=>mt(g["progress-steps"]),Ii=()=>mt(g["validation-message"]),Mt=()=>je(`.${g.actions} .${g.confirm}`),Le=()=>je(`.${g.actions} .${g.cancel}`),re=()=>je(`.${g.actions} .${g.deny}`),bl=()=>mt(g["input-label"]),Pe=()=>je(`.${g.loader}`),$e=()=>mt(g.actions),Us=()=>mt(g.footer),Oi=()=>mt(g["timer-progress-bar"]),Un=()=>mt(g.close),yl=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Wn=()=>{const o=z();if(!o)return[];const n=o.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(n).sort((h,f)=>{const _=parseInt(h.getAttribute("tabindex")||"0"),w=parseInt(f.getAttribute("tabindex")||"0");return _>w?1:_<w?-1:0}),l=o.querySelectorAll(yl),u=Array.from(l).filter(h=>h.getAttribute("tabindex")!=="-1");return[...new Set(s.concat(u))].filter(h=>ct(h))},qn=()=>Wt(document.body,g.shown)&&!Wt(document.body,g["toast-shown"])&&!Wt(document.body,g["no-backdrop"]),zi=()=>{const o=z();return o?Wt(o,g.toast):!1},kl=()=>{const o=z();return o?o.hasAttribute("data-loading"):!1},pt=(o,n)=>{if(o.textContent="",n){const l=new DOMParser().parseFromString(n,"text/html"),u=l.querySelector("head");u&&Array.from(u.childNodes).forEach(f=>{o.appendChild(f)});const h=l.querySelector("body");h&&Array.from(h.childNodes).forEach(f=>{f instanceof HTMLVideoElement||f instanceof HTMLAudioElement?o.appendChild(f.cloneNode(!0)):o.appendChild(f)})}},Wt=(o,n)=>{if(!n)return!1;const s=n.split(/\s+/);for(let l=0;l<s.length;l++)if(!o.classList.contains(s[l]))return!1;return!0},xl=(o,n)=>{Array.from(o.classList).forEach(s=>{!Object.values(g).includes(s)&&!Object.values(ki).includes(s)&&!Object.values(n.showClass||{}).includes(s)&&o.classList.remove(s)})},ft=(o,n,s)=>{if(xl(o,n),!n.customClass)return;const l=n.customClass[s];if(l){if(typeof l!="string"&&!l.forEach){nt(`Invalid type of customClass.${s}! Expected string or iterable object, got "${typeof l}"`);return}D(o,l)}},Di=(o,n)=>{if(!n)return null;switch(n){case"select":case"textarea":case"file":return o.querySelector(`.${g.popup} > .${g[n]}`);case"checkbox":return o.querySelector(`.${g.popup} > .${g.checkbox} input`);case"radio":return o.querySelector(`.${g.popup} > .${g.radio} input:checked`)||o.querySelector(`.${g.popup} > .${g.radio} input:first-child`);case"range":return o.querySelector(`.${g.popup} > .${g.range} input`);default:return o.querySelector(`.${g.popup} > .${g.input}`)}},Ws=o=>{if(o.focus(),o.type!=="file"){const n=o.value;o.value="",o.value=n}},qs=(o,n,s)=>{!o||!n||(typeof n=="string"&&(n=n.split(/\s+/).filter(Boolean)),n.forEach(l=>{Array.isArray(o)?o.forEach(u=>{s?u.classList.add(l):u.classList.remove(l)}):s?o.classList.add(l):o.classList.remove(l)}))},D=(o,n)=>{qs(o,n,!0)},yt=(o,n)=>{qs(o,n,!1)},Vt=(o,n)=>{const s=Array.from(o.children);for(let l=0;l<s.length;l++){const u=s[l];if(u instanceof HTMLElement&&Wt(u,n))return u}},ie=(o,n,s)=>{s===`${parseInt(`${s}`)}`&&(s=parseInt(s)),s||parseInt(`${s}`)===0?o.style.setProperty(n,typeof s=="number"?`${s}px`:s):o.style.removeProperty(n)},X=(o,n="flex")=>{o&&(o.style.display=n)},tt=o=>{o&&(o.style.display="none")},jn=(o,n="block")=>{o&&new MutationObserver(()=>{Ve(o,o.innerHTML,n)}).observe(o,{childList:!0,subtree:!0})},_s=(o,n,s,l)=>{const u=o.querySelector(n);u&&u.style.setProperty(s,l)},Ve=(o,n,s="flex")=>{n?X(o,s):tt(o)},ct=o=>!!(o&&(o.offsetWidth||o.offsetHeight||o.getClientRects().length)),Ll=()=>!ct(Mt())&&!ct(re())&&!ct(Le()),Tn=o=>o.scrollHeight>o.clientHeight,Pl=(o,n)=>{let s=o;for(;s&&s!==n;){if(Tn(s))return!0;s=s.parentElement}return!1},js=o=>{const n=window.getComputedStyle(o),s=parseFloat(n.getPropertyValue("animation-duration")||"0"),l=parseFloat(n.getPropertyValue("transition-duration")||"0");return s>0||l>0},$n=(o,n=!1)=>{const s=Oi();s&&ct(s)&&(n&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${o/1e3}s linear`,s.style.width="0%"},10))},Cl=()=>{const o=Oi();if(!o)return;const n=parseInt(window.getComputedStyle(o).width);o.style.removeProperty("transition"),o.style.width="100%";const s=parseInt(window.getComputedStyle(o).width),l=n/s*100;o.style.width=`${l}%`},Sl=()=>typeof window>"u"||typeof document>"u",Tl=`
 <div aria-labelledby="${g.title}" aria-describedby="${g["html-container"]}" class="${g.popup}" tabindex="-1">
   <button type="button" class="${g.close}"></button>
   <ul class="${g["progress-steps"]}"></ul>
   <div class="${g.icon}"></div>
   <img class="${g.image}" />
   <h2 class="${g.title}" id="${g.title}"></h2>
   <div class="${g["html-container"]}" id="${g["html-container"]}"></div>
   <input class="${g.input}" id="${g.input}" />
   <input type="file" class="${g.file}" />
   <div class="${g.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${g.select}" id="${g.select}"></select>
   <div class="${g.radio}"></div>
   <label class="${g.checkbox}">
     <input type="checkbox" id="${g.checkbox}" />
     <span class="${g.label}"></span>
   </label>
   <textarea class="${g.textarea}" id="${g.textarea}"></textarea>
   <div class="${g["validation-message"]}" id="${g["validation-message"]}"></div>
   <div class="${g.actions}">
     <div class="${g.loader}"></div>
     <button type="button" class="${g.confirm}"></button>
     <button type="button" class="${g.deny}"></button>
     <button type="button" class="${g.cancel}"></button>
   </div>
   <div class="${g.footer}"></div>
   <div class="${g["timer-progress-bar-container"]}">
     <div class="${g["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),El=()=>{const o=ot();return o?(o.remove(),yt([document.documentElement,document.body],[g["no-backdrop"],g["toast-shown"],g["has-column"]]),!0):!1},te=()=>{k.currentInstance.resetValidationMessage()},Al=()=>{const o=z(),n=Vt(o,g.input),s=Vt(o,g.file),l=o.querySelector(`.${g.range} input`),u=o.querySelector(`.${g.range} output`),h=Vt(o,g.select),f=o.querySelector(`.${g.checkbox} input`),_=Vt(o,g.textarea);n.oninput=te,s.onchange=te,h.onchange=te,f.onchange=te,_.oninput=te,l.oninput=()=>{te(),u.value=l.value},l.onchange=()=>{te(),u.value=l.value}},Bl=o=>typeof o=="string"?document.querySelector(o):o,Ml=o=>{const n=z();n.setAttribute("role",o.toast?"alert":"dialog"),n.setAttribute("aria-live",o.toast?"polite":"assertive"),o.toast||n.setAttribute("aria-modal","true")},Il=o=>{window.getComputedStyle(o).direction==="rtl"&&D(ot(),g.rtl)},Ol=o=>{const n=El();if(Sl()){se("SweetAlert2 requires document to initialize");return}const s=document.createElement("div");s.className=g.container,n&&D(s,g["no-transition"]),pt(s,Tl),s.dataset.swal2Theme=o.theme;const l=Bl(o.target);l.appendChild(s),o.topLayer&&(s.setAttribute("popover",""),s.showPopover()),Ml(o),Il(l),Al()},Vn=(o,n)=>{o instanceof HTMLElement?n.appendChild(o):typeof o=="object"?zl(o,n):o&&pt(n,o)},zl=(o,n)=>{o.jquery?Dl(n,o):pt(n,o.toString())},Dl=(o,n)=>{if(o.textContent="",0 in n)for(let s=0;s in n;s++)o.appendChild(n[s].cloneNode(!0));else o.appendChild(n.cloneNode(!0))},Nl=(o,n)=>{const s=$e(),l=Pe();!s||!l||(!n.showConfirmButton&&!n.showDenyButton&&!n.showCancelButton?tt(s):X(s),ft(s,n,"actions"),Zl(s,l,n),pt(l,n.loaderHtml||""),ft(l,n,"loader"))};function Zl(o,n,s){const l=Mt(),u=re(),h=Le();!l||!u||!h||(Ln(l,"confirm",s),Ln(u,"deny",s),Ln(h,"cancel",s),Rl(l,u,h,s),s.reverseButtons&&(s.toast?(o.insertBefore(h,l),o.insertBefore(u,l)):(o.insertBefore(h,n),o.insertBefore(u,n),o.insertBefore(l,n))))}function Rl(o,n,s,l){if(!l.buttonsStyling){yt([o,n,s],g.styled);return}D([o,n,s],g.styled),l.confirmButtonColor&&o.style.setProperty("--swal2-confirm-button-background-color",l.confirmButtonColor),l.denyButtonColor&&n.style.setProperty("--swal2-deny-button-background-color",l.denyButtonColor),l.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",l.cancelButtonColor),xn(o),xn(n),xn(s)}function xn(o){const n=window.getComputedStyle(o);if(n.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=n.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");o.style.setProperty("--swal2-action-button-focus-box-shadow",n.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function Ln(o,n,s){const l=Nn(n);Ve(o,s[`show${l}Button`],"inline-block"),pt(o,s[`${n}ButtonText`]||""),o.setAttribute("aria-label",s[`${n}ButtonAriaLabel`]||""),o.className=g[n],ft(o,s,`${n}Button`)}const Fl=(o,n)=>{const s=Un();s&&(pt(s,n.closeButtonHtml||""),ft(s,n,"closeButton"),Ve(s,n.showCloseButton),s.setAttribute("aria-label",n.closeButtonAriaLabel||""))},Hl=(o,n)=>{const s=ot();s&&(Ul(s,n.backdrop),Wl(s,n.position),ql(s,n.grow),ft(s,n,"container"))};function Ul(o,n){typeof n=="string"?o.style.background=n:n||D([document.documentElement,document.body],g["no-backdrop"])}function Wl(o,n){n&&(n in g?D(o,g[n]):(nt('The "position" parameter is not valid, defaulting to "center"'),D(o,g.center)))}function ql(o,n){n&&D(o,g[`grow-${n}`])}var F={innerParams:new WeakMap,domCache:new WeakMap};const jl=["input","file","range","select","radio","checkbox","textarea"],$l=(o,n)=>{const s=z();if(!s)return;const l=F.innerParams.get(o),u=!l||n.input!==l.input;jl.forEach(h=>{const f=Vt(s,g[h]);f&&(Gl(h,n.inputAttributes),f.className=g[h],u&&tt(f))}),n.input&&(u&&Vl(n),Jl(n))},Vl=o=>{if(!o.input)return;if(!$[o.input]){se(`Unexpected type of input! Expected ${Object.keys($).join(" | ")}, got "${o.input}"`);return}const n=$s(o.input);if(!n)return;const s=$[o.input](n,o);X(n),o.inputAutoFocus&&setTimeout(()=>{Ws(s)})},Kl=o=>{for(let n=0;n<o.attributes.length;n++){const s=o.attributes[n].name;["id","type","value","style"].includes(s)||o.removeAttribute(s)}},Gl=(o,n)=>{const s=z();if(!s)return;const l=Di(s,o);if(l){Kl(l);for(const u in n)l.setAttribute(u,n[u])}},Jl=o=>{if(!o.input)return;const n=$s(o.input);n&&ft(n,o,"input")},Kn=(o,n)=>{!o.placeholder&&n.inputPlaceholder&&(o.placeholder=n.inputPlaceholder)},Ke=(o,n,s)=>{if(s.inputLabel){const l=document.createElement("label"),u=g["input-label"];l.setAttribute("for",o.id),l.className=u,typeof s.customClass=="object"&&D(l,s.customClass.inputLabel),l.innerText=s.inputLabel,n.insertAdjacentElement("beforebegin",l)}},$s=o=>{const n=z();if(n)return Vt(n,g[o]||g.input)},xi=(o,n)=>{["string","number"].includes(typeof n)?o.value=`${n}`:Rn(n)||nt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof n}"`)},$={};$.text=$.email=$.password=$.number=$.tel=$.url=$.search=$.date=$["datetime-local"]=$.time=$.week=$.month=(o,n)=>(xi(o,n.inputValue),Ke(o,o,n),Kn(o,n),o.type=n.input,o);$.file=(o,n)=>(Ke(o,o,n),Kn(o,n),o);$.range=(o,n)=>{const s=o.querySelector("input"),l=o.querySelector("output");return xi(s,n.inputValue),s.type=n.input,xi(l,n.inputValue),Ke(s,o,n),o};$.select=(o,n)=>{if(o.textContent="",n.inputPlaceholder){const s=document.createElement("option");pt(s,n.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,o.appendChild(s)}return Ke(o,o,n),o};$.radio=o=>(o.textContent="",o);$.checkbox=(o,n)=>{const s=Di(z(),"checkbox");s.value="1",s.checked=!!n.inputValue;const l=o.querySelector("span");return pt(l,n.inputPlaceholder||n.inputLabel),s};$.textarea=(o,n)=>{xi(o,n.inputValue),Kn(o,n),Ke(o,o,n);const s=l=>parseInt(window.getComputedStyle(l).marginLeft)+parseInt(window.getComputedStyle(l).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const l=parseInt(window.getComputedStyle(z()).width),u=()=>{if(!document.body.contains(o))return;const h=o.offsetWidth+s(o);h>l?z().style.width=`${h}px`:ie(z(),"width",n.width)};new MutationObserver(u).observe(o,{attributes:!0,attributeFilter:["style"]})}}),o};const Yl=(o,n)=>{const s=Fn();s&&(jn(s),ft(s,n,"htmlContainer"),n.html?(Vn(n.html,s),X(s,"block")):n.text?(s.textContent=n.text,X(s,"block")):tt(s),$l(o,n))},Xl=(o,n)=>{const s=Us();s&&(jn(s),Ve(s,!!n.footer,"block"),n.footer&&Vn(n.footer,s),ft(s,n,"footer"))},Ql=(o,n)=>{const s=F.innerParams.get(o),l=xe();if(!l)return;if(s&&n.icon===s.icon){ys(l,n),bs(l,n);return}if(!n.icon&&!n.iconHtml){tt(l);return}if(n.icon&&Object.keys(ki).indexOf(n.icon)===-1){se(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${n.icon}"`),tt(l);return}X(l),ys(l,n),bs(l,n),D(l,n.showClass&&n.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Vs)},bs=(o,n)=>{for(const[s,l]of Object.entries(ki))n.icon!==s&&yt(o,l);D(o,n.icon&&ki[n.icon]),ic(o,n),Vs(),ft(o,n,"icon")},Vs=()=>{const o=z();if(!o)return;const n=window.getComputedStyle(o).getPropertyValue("background-color"),s=o.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let l=0;l<s.length;l++)s[l].style.backgroundColor=n},tc=o=>`
  ${o.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${o.animation?'<div class="swal2-success-fix"></div>':""}
  ${o.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,ec=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,ys=(o,n)=>{if(!n.icon&&!n.iconHtml)return;let s=o.innerHTML,l="";n.iconHtml?l=ks(n.iconHtml):n.icon==="success"?(l=tc(n),s=s.replace(/ style=".*?"/g,"")):n.icon==="error"?l=ec:n.icon&&(l=ks({question:"?",warning:"!",info:"i"}[n.icon])),s.trim()!==l.trim()&&pt(o,l)},ic=(o,n)=>{if(n.iconColor){o.style.color=n.iconColor,o.style.borderColor=n.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])_s(o,s,"background-color",n.iconColor);_s(o,".swal2-success-ring","border-color",n.iconColor)}},ks=o=>`<div class="${g["icon-content"]}">${o}</div>`,nc=(o,n)=>{const s=Hs();if(s){if(!n.imageUrl){tt(s);return}X(s,""),s.setAttribute("src",n.imageUrl),s.setAttribute("alt",n.imageAlt||""),ie(s,"width",n.imageWidth),ie(s,"height",n.imageHeight),s.className=g.image,ft(s,n,"image")}};let Gn=!1,Ks=0,Gs=0,Js=0,Ys=0;const oc=o=>{o.addEventListener("mousedown",Li),document.body.addEventListener("mousemove",Pi),o.addEventListener("mouseup",Ci),o.addEventListener("touchstart",Li),document.body.addEventListener("touchmove",Pi),o.addEventListener("touchend",Ci)},sc=o=>{o.removeEventListener("mousedown",Li),document.body.removeEventListener("mousemove",Pi),o.removeEventListener("mouseup",Ci),o.removeEventListener("touchstart",Li),document.body.removeEventListener("touchmove",Pi),o.removeEventListener("touchend",Ci)},Li=o=>{const n=z();if(o.target===n||xe().contains(o.target)){Gn=!0;const s=Xs(o);Ks=s.clientX,Gs=s.clientY,Js=parseInt(n.style.insetInlineStart)||0,Ys=parseInt(n.style.insetBlockStart)||0,D(n,"swal2-dragging")}},Pi=o=>{const n=z();if(Gn){let{clientX:s,clientY:l}=Xs(o);n.style.insetInlineStart=`${Js+(s-Ks)}px`,n.style.insetBlockStart=`${Ys+(l-Gs)}px`}},Ci=()=>{const o=z();Gn=!1,yt(o,"swal2-dragging")},Xs=o=>{let n=0,s=0;return o.type.startsWith("mouse")?(n=o.clientX,s=o.clientY):o.type.startsWith("touch")&&(n=o.touches[0].clientX,s=o.touches[0].clientY),{clientX:n,clientY:s}},rc=(o,n)=>{const s=ot(),l=z();if(!(!s||!l)){if(n.toast){ie(s,"width",n.width),l.style.width="100%";const u=Pe();u&&l.insertBefore(u,xe())}else ie(l,"width",n.width);ie(l,"padding",n.padding),n.color&&(l.style.color=n.color),n.background&&(l.style.background=n.background),tt(Ii()),ac(l,n),n.draggable&&!n.toast?(D(l,g.draggable),oc(l)):(yt(l,g.draggable),sc(l))}},ac=(o,n)=>{const s=n.showClass||{};o.className=`${g.popup} ${ct(o)?s.popup:""}`,n.toast?(D([document.documentElement,document.body],g["toast-shown"]),D(o,g.toast)):D(o,g.modal),ft(o,n,"popup"),typeof n.customClass=="string"&&D(o,n.customClass),n.icon&&D(o,g[`icon-${n.icon}`])},lc=(o,n)=>{const s=Hn();if(!s)return;const{progressSteps:l,currentProgressStep:u}=n;if(!l||l.length===0||u===void 0){tt(s);return}X(s),s.textContent="",u>=l.length&&nt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),l.forEach((h,f)=>{const _=cc(h);if(s.appendChild(_),f===u&&D(_,g["active-progress-step"]),f!==l.length-1){const w=uc(n);s.appendChild(w)}})},cc=o=>{const n=document.createElement("li");return D(n,g["progress-step"]),pt(n,o),n},uc=o=>{const n=document.createElement("li");return D(n,g["progress-step-line"]),o.progressStepsDistance&&ie(n,"width",o.progressStepsDistance),n},dc=(o,n)=>{const s=Fs();s&&(jn(s),Ve(s,!!(n.title||n.titleText),"block"),n.title&&Vn(n.title,s),n.titleText&&(s.innerText=n.titleText),ft(s,n,"title"))},Qs=(o,n)=>{rc(o,n),Hl(o,n),lc(o,n),Ql(o,n),nc(o,n),dc(o,n),Fl(o,n),Yl(o,n),Nl(o,n),Xl(o,n);const s=z();typeof n.didRender=="function"&&s&&n.didRender(s),k.eventEmitter.emit("didRender",s)},hc=()=>ct(z()),tr=()=>{var o;return(o=Mt())===null||o===void 0?void 0:o.click()},fc=()=>{var o;return(o=re())===null||o===void 0?void 0:o.click()},mc=()=>{var o;return(o=Le())===null||o===void 0?void 0:o.click()},Ce=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),er=o=>{o.keydownTarget&&o.keydownHandlerAdded&&(o.keydownTarget.removeEventListener("keydown",o.keydownHandler,{capture:o.keydownListenerCapture}),o.keydownHandlerAdded=!1)},pc=(o,n,s)=>{er(o),n.toast||(o.keydownHandler=l=>wc(n,l,s),o.keydownTarget=n.keydownListenerCapture?window:z(),o.keydownListenerCapture=n.keydownListenerCapture,o.keydownTarget.addEventListener("keydown",o.keydownHandler,{capture:o.keydownListenerCapture}),o.keydownHandlerAdded=!0)},En=(o,n)=>{var s;const l=Wn();if(l.length){o=o+n,o===-2&&(o=l.length-1),o===l.length?o=0:o===-1&&(o=l.length-1),l[o].focus();return}(s=z())===null||s===void 0||s.focus()},ir=["ArrowRight","ArrowDown"],gc=["ArrowLeft","ArrowUp"],wc=(o,n,s)=>{o&&(n.isComposing||n.keyCode===229||(o.stopKeydownPropagation&&n.stopPropagation(),n.key==="Enter"?vc(n,o):n.key==="Tab"?_c(n):[...ir,...gc].includes(n.key)?bc(n.key):n.key==="Escape"&&yc(n,o,s)))},vc=(o,n)=>{if(!Mi(n.allowEnterKey))return;const s=Di(z(),n.input);if(o.target&&s&&o.target instanceof HTMLElement&&o.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(n.input))return;tr(),o.preventDefault()}},_c=o=>{const n=o.target,s=Wn();let l=-1;for(let u=0;u<s.length;u++)if(n===s[u]){l=u;break}o.shiftKey?En(l,-1):En(l,1),o.stopPropagation(),o.preventDefault()},bc=o=>{const n=$e(),s=Mt(),l=re(),u=Le();if(!n||!s||!l||!u)return;const h=[s,l,u];if(document.activeElement instanceof HTMLElement&&!h.includes(document.activeElement))return;const f=ir.includes(o)?"nextElementSibling":"previousElementSibling";let _=document.activeElement;if(_){for(let w=0;w<n.children.length;w++){if(_=_[f],!_)return;if(_ instanceof HTMLButtonElement&&ct(_))break}_ instanceof HTMLButtonElement&&_.focus()}},yc=(o,n,s)=>{o.preventDefault(),Mi(n.allowEscapeKey)&&s(Ce.esc)};var ye={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const kc=()=>{const o=ot();Array.from(document.body.children).forEach(s=>{s.contains(o)||(s.hasAttribute("aria-hidden")&&s.setAttribute("data-previous-aria-hidden",s.getAttribute("aria-hidden")||""),s.setAttribute("aria-hidden","true"))})},nr=()=>{Array.from(document.body.children).forEach(n=>{n.hasAttribute("data-previous-aria-hidden")?(n.setAttribute("aria-hidden",n.getAttribute("data-previous-aria-hidden")||""),n.removeAttribute("data-previous-aria-hidden")):n.removeAttribute("aria-hidden")})},or=typeof window<"u"&&!!window.GestureEvent,xc=()=>{if(or&&!Wt(document.body,g.iosfix)){const o=document.body.scrollTop;document.body.style.top=`${o*-1}px`,D(document.body,g.iosfix),Lc()}},Lc=()=>{const o=ot();if(!o)return;let n;o.ontouchstart=s=>{n=Pc(s)},o.ontouchmove=s=>{n&&(s.preventDefault(),s.stopPropagation())}},Pc=o=>{const n=o.target,s=ot(),l=Fn();return!s||!l||Cc(o)||Sc(o)?!1:n===s||!Tn(s)&&n instanceof HTMLElement&&!Pl(n,l)&&n.tagName!=="INPUT"&&n.tagName!=="TEXTAREA"&&!(Tn(l)&&l.contains(n))},Cc=o=>o.touches&&o.touches.length&&o.touches[0].touchType==="stylus",Sc=o=>o.touches&&o.touches.length>1,Tc=()=>{if(Wt(document.body,g.iosfix)){const o=parseInt(document.body.style.top,10);yt(document.body,g.iosfix),document.body.style.top="",document.body.scrollTop=o*-1}},Ec=()=>{const o=document.createElement("div");o.className=g["scrollbar-measure"],document.body.appendChild(o);const n=o.getBoundingClientRect().width-o.clientWidth;return document.body.removeChild(o),n};let ve=null;const Ac=o=>{ve===null&&(document.body.scrollHeight>window.innerHeight||o==="scroll")&&(ve=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ve+Ec()}px`)},Bc=()=>{ve!==null&&(document.body.style.paddingRight=`${ve}px`,ve=null)};function sr(o,n,s,l){zi()?xs(o,l):(pl(s).then(()=>xs(o,l)),er(k)),or?(n.setAttribute("style","display:none !important"),n.removeAttribute("class"),n.innerHTML=""):n.remove(),qn()&&(Bc(),Tc(),nr()),Mc()}function Mc(){yt([document.documentElement,document.body],[g.shown,g["height-auto"],g["no-backdrop"],g["toast-shown"]])}function Kt(o){o=Oc(o);const n=ye.swalPromiseResolve.get(this),s=Ic(this);this.isAwaitingPromise?o.isDismissed||(Ge(this),n(o)):s&&n(o)}const Ic=o=>{const n=z();if(!n)return!1;const s=F.innerParams.get(o);if(!s||Wt(n,s.hideClass.popup))return!1;yt(n,s.showClass.popup),D(n,s.hideClass.popup);const l=ot();return yt(l,s.showClass.backdrop),D(l,s.hideClass.backdrop),zc(o,n,s),!0};function rr(o){const n=ye.swalPromiseReject.get(this);Ge(this),n&&n(o)}const Ge=o=>{o.isAwaitingPromise&&(delete o.isAwaitingPromise,F.innerParams.get(o)||o._destroy())},Oc=o=>typeof o>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},o),zc=(o,n,s)=>{var l;const u=ot(),h=js(n);typeof s.willClose=="function"&&s.willClose(n),(l=k.eventEmitter)===null||l===void 0||l.emit("willClose",n),h?Dc(o,n,u,s.returnFocus,s.didClose):sr(o,u,s.returnFocus,s.didClose)},Dc=(o,n,s,l,u)=>{k.swalCloseEventFinishedCallback=sr.bind(null,o,s,l,u);const h=function(f){if(f.target===n){var _;(_=k.swalCloseEventFinishedCallback)===null||_===void 0||_.call(k),delete k.swalCloseEventFinishedCallback,n.removeEventListener("animationend",h),n.removeEventListener("transitionend",h)}};n.addEventListener("animationend",h),n.addEventListener("transitionend",h)},xs=(o,n)=>{setTimeout(()=>{var s;typeof n=="function"&&n.bind(o.params)(),(s=k.eventEmitter)===null||s===void 0||s.emit("didClose"),o._destroy&&o._destroy()})},ke=o=>{let n=z();if(n||new I,n=z(),!n)return;const s=Pe();zi()?tt(xe()):Nc(n,o),X(s),n.setAttribute("data-loading","true"),n.setAttribute("aria-busy","true"),n.focus()},Nc=(o,n)=>{const s=$e(),l=Pe();!s||!l||(!n&&ct(Mt())&&(n=Mt()),X(s),n&&(tt(n),l.setAttribute("data-button-to-replace",n.className),s.insertBefore(l,n)),D([o,s],g.loading))},Zc=(o,n)=>{n.input==="select"||n.input==="radio"?Wc(o,n):["text","email","number","tel","textarea"].some(s=>s===n.input)&&(Zn(n.inputValue)||Rn(n.inputValue))&&(ke(Mt()),qc(o,n))},Rc=(o,n)=>{const s=o.getInput();if(!s)return null;switch(n.input){case"checkbox":return Fc(s);case"radio":return Hc(s);case"file":return Uc(s);default:return n.inputAutoTrim?s.value.trim():s.value}},Fc=o=>o.checked?1:0,Hc=o=>o.checked?o.value:null,Uc=o=>o.files&&o.files.length?o.getAttribute("multiple")!==null?o.files:o.files[0]:null,Wc=(o,n)=>{const s=z();if(!s)return;const l=u=>{n.input==="select"?jc(s,Si(u),n):n.input==="radio"&&$c(s,Si(u),n)};Zn(n.inputOptions)||Rn(n.inputOptions)?(ke(Mt()),qe(n.inputOptions).then(u=>{o.hideLoading(),l(u)})):typeof n.inputOptions=="object"?l(n.inputOptions):se(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof n.inputOptions}`)},qc=(o,n)=>{const s=o.getInput();s&&(tt(s),qe(n.inputValue).then(l=>{s.value=n.input==="number"?`${parseFloat(l)||0}`:`${l}`,X(s),s.focus(),o.hideLoading()}).catch(l=>{se(`Error in inputValue promise: ${l}`),s.value="",X(s),s.focus(),o.hideLoading()}))};function jc(o,n,s){const l=Vt(o,g.select);if(!l)return;const u=(h,f,_)=>{const w=document.createElement("option");w.value=_,pt(w,f),w.selected=ar(_,s.inputValue),h.appendChild(w)};n.forEach(h=>{const f=h[0],_=h[1];if(Array.isArray(_)){const w=document.createElement("optgroup");w.label=f,w.disabled=!1,l.appendChild(w),_.forEach(x=>u(w,x[1],x[0]))}else u(l,_,f)}),l.focus()}function $c(o,n,s){const l=Vt(o,g.radio);if(!l)return;n.forEach(h=>{const f=h[0],_=h[1],w=document.createElement("input"),x=document.createElement("label");w.type="radio",w.name=g.radio,w.value=f,ar(f,s.inputValue)&&(w.checked=!0);const N=document.createElement("span");pt(N,_),N.className=g.label,x.appendChild(w),x.appendChild(N),l.appendChild(x)});const u=l.querySelectorAll("input");u.length&&u[0].focus()}const Si=o=>{const n=[];return o instanceof Map?o.forEach((s,l)=>{let u=s;typeof u=="object"&&(u=Si(u)),n.push([l,u])}):Object.keys(o).forEach(s=>{let l=o[s];typeof l=="object"&&(l=Si(l)),n.push([s,l])}),n},ar=(o,n)=>!!n&&n.toString()===o.toString(),Vc=o=>{const n=F.innerParams.get(o);o.disableButtons(),n.input?lr(o,"confirm"):Yn(o,!0)},Kc=o=>{const n=F.innerParams.get(o);o.disableButtons(),n.returnInputValueOnDeny?lr(o,"deny"):Jn(o,!1)},Gc=(o,n)=>{o.disableButtons(),n(Ce.cancel)},lr=(o,n)=>{const s=F.innerParams.get(o);if(!s.input){se(`The "input" parameter is needed to be set when using returnInputValueOn${Nn(n)}`);return}const l=o.getInput(),u=Rc(o,s);s.inputValidator?Jc(o,u,n):l&&!l.checkValidity()?(o.enableButtons(),o.showValidationMessage(s.validationMessage||l.validationMessage)):n==="deny"?Jn(o,u):Yn(o,u)},Jc=(o,n,s)=>{const l=F.innerParams.get(o);o.disableInput(),Promise.resolve().then(()=>qe(l.inputValidator(n,l.validationMessage))).then(h=>{o.enableButtons(),o.enableInput(),h?o.showValidationMessage(h):s==="deny"?Jn(o,n):Yn(o,n)})},Jn=(o,n)=>{const s=F.innerParams.get(o||void 0);s.showLoaderOnDeny&&ke(re()),s.preDeny?(o.isAwaitingPromise=!0,Promise.resolve().then(()=>qe(s.preDeny(n,s.validationMessage))).then(u=>{u===!1?(o.hideLoading(),Ge(o)):o.close({isDenied:!0,value:typeof u>"u"?n:u})}).catch(u=>cr(o||void 0,u))):o.close({isDenied:!0,value:n})},Ls=(o,n)=>{o.close({isConfirmed:!0,value:n})},cr=(o,n)=>{o.rejectPromise(n)},Yn=(o,n)=>{const s=F.innerParams.get(o||void 0);s.showLoaderOnConfirm&&ke(),s.preConfirm?(o.resetValidationMessage(),o.isAwaitingPromise=!0,Promise.resolve().then(()=>qe(s.preConfirm(n,s.validationMessage))).then(u=>{ct(Ii())||u===!1?(o.hideLoading(),Ge(o)):Ls(o,typeof u>"u"?n:u)}).catch(u=>cr(o||void 0,u))):Ls(o,n)};function Ti(){const o=F.innerParams.get(this);if(!o)return;const n=F.domCache.get(this);tt(n.loader),zi()?o.icon&&X(xe()):Yc(n),yt([n.popup,n.actions],g.loading),n.popup.removeAttribute("aria-busy"),n.popup.removeAttribute("data-loading"),n.confirmButton.disabled=!1,n.denyButton.disabled=!1,n.cancelButton.disabled=!1}const Yc=o=>{const n=o.popup.getElementsByClassName(o.loader.getAttribute("data-button-to-replace"));n.length?X(n[0],"inline-block"):Ll()&&tt(o.actions)};function ur(){const o=F.innerParams.get(this),n=F.domCache.get(this);return n?Di(n.popup,o.input):null}function dr(o,n,s){const l=F.domCache.get(o);n.forEach(u=>{l[u].disabled=s})}function hr(o,n){const s=z();if(!(!s||!o))if(o.type==="radio"){const l=s.querySelectorAll(`[name="${g.radio}"]`);for(let u=0;u<l.length;u++)l[u].disabled=n}else o.disabled=n}function fr(){dr(this,["confirmButton","denyButton","cancelButton"],!1)}function mr(){dr(this,["confirmButton","denyButton","cancelButton"],!0)}function pr(){hr(this.getInput(),!1)}function gr(){hr(this.getInput(),!0)}function wr(o){const n=F.domCache.get(this),s=F.innerParams.get(this);pt(n.validationMessage,o),n.validationMessage.className=g["validation-message"],s.customClass&&s.customClass.validationMessage&&D(n.validationMessage,s.customClass.validationMessage),X(n.validationMessage);const l=this.getInput();l&&(l.setAttribute("aria-invalid","true"),l.setAttribute("aria-describedby",g["validation-message"]),Ws(l),D(l,g.inputerror))}function vr(){const o=F.domCache.get(this);o.validationMessage&&tt(o.validationMessage);const n=this.getInput();n&&(n.removeAttribute("aria-invalid"),n.removeAttribute("aria-describedby"),yt(n,g.inputerror))}const _e={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Xc=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Qc={allowEnterKey:void 0},tu=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],_r=o=>Object.prototype.hasOwnProperty.call(_e,o),br=o=>Xc.indexOf(o)!==-1,yr=o=>Qc[o],eu=o=>{_r(o)||nt(`Unknown parameter "${o}"`)},iu=o=>{tu.includes(o)&&nt(`The parameter "${o}" is incompatible with toasts`)},nu=o=>{const n=yr(o);n&&Rs(o,n)},kr=o=>{o.backdrop===!1&&o.allowOutsideClick&&nt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),o.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(o.theme)&&nt(`Invalid theme "${o.theme}"`);for(const n in o)eu(n),o.toast&&iu(n),nu(n)};function xr(o){const n=ot(),s=z(),l=F.innerParams.get(this);if(!s||Wt(s,l.hideClass.popup)){nt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const u=ou(o),h=Object.assign({},l,u);kr(h),n.dataset.swal2Theme=h.theme,Qs(this,h),F.innerParams.set(this,h),Object.defineProperties(this,{params:{value:Object.assign({},this.params,o),writable:!1,enumerable:!0}})}const ou=o=>{const n={};return Object.keys(o).forEach(s=>{br(s)?n[s]=o[s]:nt(`Invalid parameter to update: ${s}`)}),n};function Lr(){const o=F.domCache.get(this),n=F.innerParams.get(this);if(!n){Pr(this);return}o.popup&&k.swalCloseEventFinishedCallback&&(k.swalCloseEventFinishedCallback(),delete k.swalCloseEventFinishedCallback),typeof n.didDestroy=="function"&&n.didDestroy(),k.eventEmitter.emit("didDestroy"),su(this)}const su=o=>{Pr(o),delete o.params,delete k.keydownHandler,delete k.keydownTarget,delete k.currentInstance},Pr=o=>{o.isAwaitingPromise?(Pn(F,o),o.isAwaitingPromise=!0):(Pn(ye,o),Pn(F,o),delete o.isAwaitingPromise,delete o.disableButtons,delete o.enableButtons,delete o.getInput,delete o.disableInput,delete o.enableInput,delete o.hideLoading,delete o.disableLoading,delete o.showValidationMessage,delete o.resetValidationMessage,delete o.close,delete o.closePopup,delete o.closeModal,delete o.closeToast,delete o.rejectPromise,delete o.update,delete o._destroy)},Pn=(o,n)=>{for(const s in o)o[s].delete(n)};var ru=Object.freeze({__proto__:null,_destroy:Lr,close:Kt,closeModal:Kt,closePopup:Kt,closeToast:Kt,disableButtons:mr,disableInput:gr,disableLoading:Ti,enableButtons:fr,enableInput:pr,getInput:ur,handleAwaitingPromise:Ge,hideLoading:Ti,rejectPromise:rr,resetValidationMessage:vr,showValidationMessage:wr,update:xr});const au=(o,n,s)=>{o.toast?lu(o,n,s):(uu(n),du(n),hu(o,n,s))},lu=(o,n,s)=>{n.popup.onclick=()=>{o&&(cu(o)||o.timer||o.input)||s(Ce.close)}},cu=o=>!!(o.showConfirmButton||o.showDenyButton||o.showCancelButton||o.showCloseButton);let Ei=!1;const uu=o=>{o.popup.onmousedown=()=>{o.container.onmouseup=function(n){o.container.onmouseup=()=>{},n.target===o.container&&(Ei=!0)}}},du=o=>{o.container.onmousedown=n=>{n.target===o.container&&n.preventDefault(),o.popup.onmouseup=function(s){o.popup.onmouseup=()=>{},(s.target===o.popup||s.target instanceof HTMLElement&&o.popup.contains(s.target))&&(Ei=!0)}}},hu=(o,n,s)=>{n.container.onclick=l=>{if(Ei){Ei=!1;return}l.target===n.container&&Mi(o.allowOutsideClick)&&s(Ce.backdrop)}},fu=o=>typeof o=="object"&&o.jquery,Ps=o=>o instanceof Element||fu(o),mu=o=>{const n={};return typeof o[0]=="object"&&!Ps(o[0])?Object.assign(n,o[0]):["title","html","icon"].forEach((s,l)=>{const u=o[l];typeof u=="string"||Ps(u)?n[s]=u:u!==void 0&&se(`Unexpected type of ${s}! Expected "string" or "Element", got ${typeof u}`)}),n};function pu(...o){return new this(...o)}function gu(o){class n extends this{_main(l,u){return super._main(l,Object.assign({},o,u))}}return n}const wu=()=>k.timeout&&k.timeout.getTimerLeft(),Cr=()=>{if(k.timeout)return Cl(),k.timeout.stop()},Sr=()=>{if(k.timeout){const o=k.timeout.start();return $n(o),o}},vu=()=>{const o=k.timeout;return o&&(o.running?Cr():Sr())},_u=o=>{if(k.timeout){const n=k.timeout.increase(o);return $n(n,!0),n}},bu=()=>!!(k.timeout&&k.timeout.isRunning());let Cs=!1;const An={};function yu(o="data-swal-template"){An[o]=this,Cs||(document.body.addEventListener("click",ku),Cs=!0)}const ku=o=>{for(let n=o.target;n&&n!==document;n=n.parentNode)for(const s in An){const l=n.getAttribute(s);if(l){An[s].fire({template:l});return}}};class xu{constructor(){this.events={}}_getHandlersByEventName(n){return typeof this.events[n]>"u"&&(this.events[n]=[]),this.events[n]}on(n,s){const l=this._getHandlersByEventName(n);l.includes(s)||l.push(s)}once(n,s){const l=(...u)=>{this.removeListener(n,l),s.apply(this,u)};this.on(n,l)}emit(n,...s){this._getHandlersByEventName(n).forEach(l=>{try{l.apply(this,s)}catch(u){console.error(u)}})}removeListener(n,s){const l=this._getHandlersByEventName(n),u=l.indexOf(s);u>-1&&l.splice(u,1)}removeAllListeners(n){this.events[n]!==void 0&&(this.events[n].length=0)}reset(){this.events={}}}k.eventEmitter=new xu;const Lu=(o,n)=>{k.eventEmitter.on(o,n)},Pu=(o,n)=>{k.eventEmitter.once(o,n)},Cu=(o,n)=>{if(!o){k.eventEmitter.reset();return}n?k.eventEmitter.removeListener(o,n):k.eventEmitter.removeAllListeners(o)};var Su=Object.freeze({__proto__:null,argsToParams:mu,bindClickHandler:yu,clickCancel:mc,clickConfirm:tr,clickDeny:fc,enableLoading:ke,fire:pu,getActions:$e,getCancelButton:Le,getCloseButton:Un,getConfirmButton:Mt,getContainer:ot,getDenyButton:re,getFocusableElements:Wn,getFooter:Us,getHtmlContainer:Fn,getIcon:xe,getIconContent:_l,getImage:Hs,getInputLabel:bl,getLoader:Pe,getPopup:z,getProgressSteps:Hn,getTimerLeft:wu,getTimerProgressBar:Oi,getTitle:Fs,getValidationMessage:Ii,increaseTimer:_u,isDeprecatedParameter:yr,isLoading:kl,isTimerRunning:bu,isUpdatableParameter:br,isValidParameter:_r,isVisible:hc,mixin:gu,off:Cu,on:Lu,once:Pu,resumeTimer:Sr,showLoading:ke,stopTimer:Cr,toggleTimer:vu});class Tu{constructor(n,s){this.callback=n,this.remaining=s,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(n){const s=this.running;return s&&this.stop(),this.remaining+=n,s&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Tr=["swal-title","swal-html","swal-footer"],Eu=o=>{const n=typeof o.template=="string"?document.querySelector(o.template):o.template;if(!n)return{};const s=n.content;return Nu(s),Object.assign(Au(s),Bu(s),Mu(s),Iu(s),Ou(s),zu(s),Du(s,Tr))},Au=o=>{const n={};return Array.from(o.querySelectorAll("swal-param")).forEach(l=>{oe(l,["name","value"]);const u=l.getAttribute("name"),h=l.getAttribute("value");!u||!h||(typeof _e[u]=="boolean"?n[u]=h!=="false":typeof _e[u]=="object"?n[u]=JSON.parse(h):n[u]=h)}),n},Bu=o=>{const n={};return Array.from(o.querySelectorAll("swal-function-param")).forEach(l=>{const u=l.getAttribute("name"),h=l.getAttribute("value");!u||!h||(n[u]=new Function(`return ${h}`)())}),n},Mu=o=>{const n={};return Array.from(o.querySelectorAll("swal-button")).forEach(l=>{oe(l,["type","color","aria-label"]);const u=l.getAttribute("type");!u||!["confirm","cancel","deny"].includes(u)||(n[`${u}ButtonText`]=l.innerHTML,n[`show${Nn(u)}Button`]=!0,l.hasAttribute("color")&&(n[`${u}ButtonColor`]=l.getAttribute("color")),l.hasAttribute("aria-label")&&(n[`${u}ButtonAriaLabel`]=l.getAttribute("aria-label")))}),n},Iu=o=>{const n={},s=o.querySelector("swal-image");return s&&(oe(s,["src","width","height","alt"]),s.hasAttribute("src")&&(n.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(n.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(n.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(n.imageAlt=s.getAttribute("alt")||void 0)),n},Ou=o=>{const n={},s=o.querySelector("swal-icon");return s&&(oe(s,["type","color"]),s.hasAttribute("type")&&(n.icon=s.getAttribute("type")),s.hasAttribute("color")&&(n.iconColor=s.getAttribute("color")),n.iconHtml=s.innerHTML),n},zu=o=>{const n={},s=o.querySelector("swal-input");s&&(oe(s,["type","label","placeholder","value"]),n.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(n.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(n.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(n.inputValue=s.getAttribute("value")));const l=Array.from(o.querySelectorAll("swal-input-option"));return l.length&&(n.inputOptions={},l.forEach(u=>{oe(u,["value"]);const h=u.getAttribute("value");if(!h)return;const f=u.innerHTML;n.inputOptions[h]=f})),n},Du=(o,n)=>{const s={};for(const l in n){const u=n[l],h=o.querySelector(u);h&&(oe(h,[]),s[u.replace(/^swal-/,"")]=h.innerHTML.trim())}return s},Nu=o=>{const n=Tr.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(o.children).forEach(s=>{const l=s.tagName.toLowerCase();n.includes(l)||nt(`Unrecognized element <${l}>`)})},oe=(o,n)=>{Array.from(o.attributes).forEach(s=>{n.indexOf(s.name)===-1&&nt([`Unrecognized attribute "${s.name}" on <${o.tagName.toLowerCase()}>.`,`${n.length?`Allowed attributes are: ${n.join(", ")}`:"To set the value, use HTML within the element."}`])})},Er=10,Zu=o=>{const n=ot(),s=z();typeof o.willOpen=="function"&&o.willOpen(s),k.eventEmitter.emit("willOpen",s);const u=window.getComputedStyle(document.body).overflowY;Hu(n,s,o),setTimeout(()=>{Ru(n,s)},Er),qn()&&(Fu(n,o.scrollbarPadding,u),kc()),!zi()&&!k.previousActiveElement&&(k.previousActiveElement=document.activeElement),typeof o.didOpen=="function"&&setTimeout(()=>o.didOpen(s)),k.eventEmitter.emit("didOpen",s)},Ai=o=>{const n=z();if(o.target!==n)return;const s=ot();n.removeEventListener("animationend",Ai),n.removeEventListener("transitionend",Ai),s.style.overflowY="auto",yt(s,g["no-transition"])},Ru=(o,n)=>{js(n)?(o.style.overflowY="hidden",n.addEventListener("animationend",Ai),n.addEventListener("transitionend",Ai)):o.style.overflowY="auto"},Fu=(o,n,s)=>{xc(),n&&s!=="hidden"&&Ac(s),setTimeout(()=>{o.scrollTop=0})},Hu=(o,n,s)=>{D(o,s.showClass.backdrop),s.animation?(n.style.setProperty("opacity","0","important"),X(n,"grid"),setTimeout(()=>{D(n,s.showClass.popup),n.style.removeProperty("opacity")},Er)):X(n,"grid"),D([document.documentElement,document.body],g.shown),s.heightAuto&&s.backdrop&&!s.toast&&D([document.documentElement,document.body],g["height-auto"])};var Ss={email:(o,n)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(o)?Promise.resolve():Promise.resolve(n||"Invalid email address"),url:(o,n)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(o)?Promise.resolve():Promise.resolve(n||"Invalid URL")};function Uu(o){o.inputValidator||(o.input==="email"&&(o.inputValidator=Ss.email),o.input==="url"&&(o.inputValidator=Ss.url))}function Wu(o){(!o.target||typeof o.target=="string"&&!document.querySelector(o.target)||typeof o.target!="string"&&!o.target.appendChild)&&(nt('Target parameter is not valid, defaulting to "body"'),o.target="body")}function qu(o){Uu(o),o.showLoaderOnConfirm&&!o.preConfirm&&nt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Wu(o),typeof o.title=="string"&&(o.title=o.title.split(`
`).join("<br />")),Ol(o)}let Bt;var yi=new WeakMap;class V{constructor(...n){if(dl(this,yi,void 0),typeof window>"u")return;Bt=this;const s=Object.freeze(this.constructor.argsToParams(n));this.params=s,this.isAwaitingPromise=!1,hl(yi,this,this._main(Bt.params))}_main(n,s={}){if(kr(Object.assign({},s,n)),k.currentInstance){const h=ye.swalPromiseResolve.get(k.currentInstance),{isAwaitingPromise:f}=k.currentInstance;k.currentInstance._destroy(),f||h({isDismissed:!0}),qn()&&nr()}k.currentInstance=Bt;const l=$u(n,s);qu(l),Object.freeze(l),k.timeout&&(k.timeout.stop(),delete k.timeout),clearTimeout(k.restoreFocusTimeout);const u=Vu(Bt);return Qs(Bt,l),F.innerParams.set(Bt,l),ju(Bt,u,l)}then(n){return ws(yi,this).then(n)}finally(n){return ws(yi,this).finally(n)}}const ju=(o,n,s)=>new Promise((l,u)=>{const h=f=>{o.close({isDismissed:!0,dismiss:f,isConfirmed:!1,isDenied:!1})};ye.swalPromiseResolve.set(o,l),ye.swalPromiseReject.set(o,u),n.confirmButton.onclick=()=>{Vc(o)},n.denyButton.onclick=()=>{Kc(o)},n.cancelButton.onclick=()=>{Gc(o,h)},n.closeButton.onclick=()=>{h(Ce.close)},au(s,n,h),pc(k,s,h),Zc(o,s),Zu(s),Ku(k,s,h),Gu(n,s),setTimeout(()=>{n.container.scrollTop=0})}),$u=(o,n)=>{const s=Eu(o),l=Object.assign({},_e,n,s,o);return l.showClass=Object.assign({},_e.showClass,l.showClass),l.hideClass=Object.assign({},_e.hideClass,l.hideClass),l.animation===!1&&(l.showClass={backdrop:"swal2-noanimation"},l.hideClass={}),l},Vu=o=>{const n={popup:z(),container:ot(),actions:$e(),confirmButton:Mt(),denyButton:re(),cancelButton:Le(),loader:Pe(),closeButton:Un(),validationMessage:Ii(),progressSteps:Hn()};return F.domCache.set(o,n),n},Ku=(o,n,s)=>{const l=Oi();tt(l),n.timer&&(o.timeout=new Tu(()=>{s("timer"),delete o.timeout},n.timer),n.timerProgressBar&&(X(l),ft(l,n,"timerProgressBar"),setTimeout(()=>{o.timeout&&o.timeout.running&&$n(n.timer)})))},Gu=(o,n)=>{if(!n.toast){if(!Mi(n.allowEnterKey)){Rs("allowEnterKey"),Xu();return}Ju(o)||Yu(o,n)||En(-1,1)}},Ju=o=>{const n=Array.from(o.popup.querySelectorAll("[autofocus]"));for(const s of n)if(s instanceof HTMLElement&&ct(s))return s.focus(),!0;return!1},Yu=(o,n)=>n.focusDeny&&ct(o.denyButton)?(o.denyButton.focus(),!0):n.focusCancel&&ct(o.cancelButton)?(o.cancelButton.focus(),!0):n.focusConfirm&&ct(o.confirmButton)?(o.confirmButton.focus(),!0):!1,Xu=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};V.prototype.disableButtons=mr;V.prototype.enableButtons=fr;V.prototype.getInput=ur;V.prototype.disableInput=gr;V.prototype.enableInput=pr;V.prototype.hideLoading=Ti;V.prototype.disableLoading=Ti;V.prototype.showValidationMessage=wr;V.prototype.resetValidationMessage=vr;V.prototype.close=Kt;V.prototype.closePopup=Kt;V.prototype.closeModal=Kt;V.prototype.closeToast=Kt;V.prototype.rejectPromise=rr;V.prototype.update=xr;V.prototype._destroy=Lr;Object.assign(V,Su);Object.keys(ru).forEach(o=>{V[o]=function(...n){return Bt&&Bt[o]?Bt[o](...n):null}});V.DismissReason=Ce;V.version="11.26.3";const I=V;I.default=I;typeof document<"u"&&function(o,n){var s=o.createElement("style");if(o.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=n);else try{s.innerHTML=n}catch{s.innerText=n}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');class Qu{async render(){return`
      <section class="container home-section">
        <header class="home-header">
          <h1>Selamat Datang di Aplikasi Berbagi Story</h1>
          <p class="home-subtitle">bagikan cerita dimanapun anda berada</p>
        </header>

        <div class="home-features">
          <div class="feature-card">
            <div class="feature-icon"></div>
            <h2>Cerita dengan Lokasi</h2>
            <p>Lihat cerita-cerita menarik yang tersebar di berbagai lokasi di peta interaktif</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon"></div>
            <h2>Bagikan Cerita Anda</h2>
            <p>Tambahkan cerita baru dengan foto dan pilih lokasi di peta</p>
          </div>

          <div class="feature-card">
            <div class="feature-icon"></div>
            <h2>Peta Interaktif</h2>
            <p>Jelajahi cerita berdasarkan lokasi geografis pada peta digital</p>
          </div>
        </div>

        <div class="home-actions">
          <a href="#/stories" class="btn-primary" aria-label="Lihat semua cerita">
            Lihat Semua Cerita
          </a>
          <a href="#/add-story" class="btn-secondary" aria-label="Tambah cerita baru">
            Tambah Cerita Baru
          </a>
        </div>

        <section class="home-about">
          <h2>Tentang Aplikasi</h2>
          <p>
            Aplikasi Berbagi Cerita adalah platform untuk berbagi cerita dimanapun anda berada
          </p>
        </section>

        <section class="home-auth-info" id="auth-info-section">
          <h2>Status Autentikasi</h2>
          <div id="auth-status"></div>
        </section>
      </section>
    `}async afterRender(){const n=document.querySelector(".skip-to-content");n&&n.addEventListener("click",s=>{s.preventDefault(),document.querySelector(".home-header").focus()}),this.displayAuthStatus()}displayAuthStatus(){const n=document.getElementById("auth-status"),s=localStorage.getItem("auth_token"),l=localStorage.getItem("user_name");s?n.innerHTML=`
        <div class="auth-success">
          <p> <strong>Anda sudah login</strong></p>
          <p> Nama: ${l||"User"}</p>
          <p> Token tersimpan di localStorage</p>
        </div>
      `:n.innerHTML=`
        <div class="auth-not-logged">
          <p> <strong>Belum login</strong></p>
          <p>Silakan <a href="#/login">login</a> untuk dapat menambahkan story</p>
        </div>
      `}}var We={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var td=We.exports,Ts;function ed(){return Ts||(Ts=1,function(o,n){(function(s,l){l(n)})(td,function(s){var l="1.9.4";function u(t){var e,i,r,a;for(i=1,r=arguments.length;i<r;i++){a=arguments[i];for(e in a)t[e]=a[e]}return t}var h=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function f(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var r=i.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(i.call(arguments)):arguments)}}var _=0;function w(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function x(t,e,i){var r,a,c,d;return d=function(){r=!1,a&&(c.apply(i,a),a=!1)},c=function(){r?a=arguments:(t.apply(i,arguments),setTimeout(d,e),r=!0)},c}function N(t,e,i){var r=e[1],a=e[0],c=r-a;return t===r&&i?t:((t-a)%c+c)%c+a}function U(){return!1}function gt(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function ae(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Ct(t){return ae(t).split(/\s+/)}function H(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function Xn(t,e,i){var r=[];for(var a in t)r.push(encodeURIComponent(i?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(!e||e.indexOf("?")===-1?"?":"&")+r.join("&")}var Nr=/\{ *([\w_ -]+) *\}/g;function Qn(t,e){return t.replace(Nr,function(i,r){var a=e[r];if(a===void 0)throw new Error("No value provided for variable "+i);return typeof a=="function"&&(a=a(e)),a})}var kt=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Zi(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var ti="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ri(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var to=0;function eo(t){var e=+new Date,i=Math.max(0,16-(e-to));return to=e+i,window.setTimeout(t,i)}var Fi=window.requestAnimationFrame||Ri("RequestAnimationFrame")||eo,io=window.cancelAnimationFrame||Ri("CancelAnimationFrame")||Ri("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function st(t,e,i){if(i&&Fi===eo)t.call(e);else return Fi.call(window,f(t,e))}function wt(t){t&&io.call(window,t)}var Zr={__proto__:null,extend:u,create:h,bind:f,get lastId(){return _},stamp:w,throttle:x,wrapNum:N,falseFn:U,formatNum:gt,trim:ae,splitWords:Ct,setOptions:H,getParamString:Xn,template:Qn,isArray:kt,indexOf:Zi,emptyImageUrl:ti,requestFn:Fi,cancelFn:io,requestAnimFrame:st,cancelAnimFrame:wt};function It(){}It.extend=function(t){var e=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,r=h(i);r.constructor=e,e.prototype=r;for(var a in this)Object.prototype.hasOwnProperty.call(this,a)&&a!=="prototype"&&a!=="__super__"&&(e[a]=this[a]);return t.statics&&u(e,t.statics),t.includes&&(Rr(t.includes),u.apply(null,[r].concat(t.includes))),u(r,t),delete r.statics,delete r.includes,r.options&&(r.options=i.options?h(i.options):{},u(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var c=0,d=r._initHooks.length;c<d;c++)r._initHooks[c].call(this)}},e},It.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},It.mergeOptions=function(t){return u(this.prototype.options,t),this},It.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function Rr(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=kt(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ut={on:function(t,e,i){if(typeof t=="object")for(var r in t)this._on(r,t[r],e);else{t=Ct(t);for(var a=0,c=t.length;a<c;a++)this._on(t[a],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var r in t)this._off(r,t[r],e);else{t=Ct(t);for(var a=arguments.length===1,c=0,d=t.length;c<d;c++)a?this._off(t[c]):this._off(t[c],e,i)}return this},_on:function(t,e,i,r){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var a={fn:e,ctx:i};r&&(a.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(a)}},_off:function(t,e,i){var r,a,c;if(this._events&&(r=this._events[t],!!r)){if(arguments.length===1){if(this._firingCount)for(a=0,c=r.length;a<c;a++)r[a].fn=U;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var d=this._listens(t,e,i);if(d!==!1){var m=r[d];this._firingCount&&(m.fn=U,this._events[t]=r=r.slice()),r.splice(d,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var c=0,d=a.length;c<d;c++){var m=a[c],p=m.fn;m.once&&this.off(t,p,m.ctx),p.call(m.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e,i,r){typeof t!="string"&&console.warn('"string" type argument expected');var a=e;typeof e!="function"&&(r=!!e,a=void 0,i=void 0);var c=this._events&&this._events[t];if(c&&c.length&&this._listens(t,a,i)!==!1)return!0;if(r){for(var d in this._eventParents)if(this._eventParents[d].listens(t,e,i,r))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var r=this._events[t]||[];if(!e)return!!r.length;i===this&&(i=void 0);for(var a=0,c=r.length;a<c;a++)if(r[a].fn===e&&r[a].ctx===i)return a;return!1},once:function(t,e,i){if(typeof t=="object")for(var r in t)this._on(r,t[r],e,!0);else{t=Ct(t);for(var a=0,c=t.length;a<c;a++)this._on(t[a],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[w(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[w(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};ut.addEventListener=ut.on,ut.removeEventListener=ut.clearAllEventListeners=ut.off,ut.addOneTimeEventListener=ut.once,ut.fireEvent=ut.fire,ut.hasEventListeners=ut.listens;var Se=It.extend(ut);function S(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var no=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};S.prototype={clone:function(){return new S(this.x,this.y)},add:function(t){return this.clone()._add(C(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(C(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new S(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new S(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=no(this.x),this.y=no(this.y),this},distanceTo:function(t){t=C(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=C(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=C(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+gt(this.x)+", "+gt(this.y)+")"}};function C(t,e,i){return t instanceof S?t:kt(t)?new S(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new S(t.x,t.y):new S(t,e,i)}function W(t,e){if(t)for(var i=e?[t,e]:t,r=0,a=i.length;r<a;r++)this.extend(i[r])}W.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof S||typeof t[0]=="number"||"x"in t)e=i=C(t);else if(t=rt(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return C((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return C(this.min.x,this.max.y)},getTopRight:function(){return C(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof S?t=C(t):t=rt(t),t instanceof W?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=rt(t);var e=this.min,i=this.max,r=t.min,a=t.max,c=a.x>=e.x&&r.x<=i.x,d=a.y>=e.y&&r.y<=i.y;return c&&d},overlaps:function(t){t=rt(t);var e=this.min,i=this.max,r=t.min,a=t.max,c=a.x>e.x&&r.x<i.x,d=a.y>e.y&&r.y<i.y;return c&&d},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,r=Math.abs(e.x-i.x)*t,a=Math.abs(e.y-i.y)*t;return rt(C(e.x-r,e.y-a),C(i.x+r,i.y+a))},equals:function(t){return t?(t=rt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function rt(t,e){return!t||t instanceof W?t:new W(t,e)}function at(t,e){if(t)for(var i=e?[t,e]:t,r=0,a=i.length;r<a;r++)this.extend(i[r])}at.prototype={extend:function(t){var e=this._southWest,i=this._northEast,r,a;if(t instanceof Z)r=t,a=t;else if(t instanceof at){if(r=t._southWest,a=t._northEast,!r||!a)return this}else return t?this.extend(B(t)||K(t)):this;return!e&&!i?(this._southWest=new Z(r.lat,r.lng),this._northEast=new Z(a.lat,a.lng)):(e.lat=Math.min(r.lat,e.lat),e.lng=Math.min(r.lng,e.lng),i.lat=Math.max(a.lat,i.lat),i.lng=Math.max(a.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,r=Math.abs(e.lat-i.lat)*t,a=Math.abs(e.lng-i.lng)*t;return new at(new Z(e.lat-r,e.lng-a),new Z(i.lat+r,i.lng+a))},getCenter:function(){return new Z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Z(this.getNorth(),this.getWest())},getSouthEast:function(){return new Z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Z||"lat"in t?t=B(t):t=K(t);var e=this._southWest,i=this._northEast,r,a;return t instanceof at?(r=t.getSouthWest(),a=t.getNorthEast()):r=a=t,r.lat>=e.lat&&a.lat<=i.lat&&r.lng>=e.lng&&a.lng<=i.lng},intersects:function(t){t=K(t);var e=this._southWest,i=this._northEast,r=t.getSouthWest(),a=t.getNorthEast(),c=a.lat>=e.lat&&r.lat<=i.lat,d=a.lng>=e.lng&&r.lng<=i.lng;return c&&d},overlaps:function(t){t=K(t);var e=this._southWest,i=this._northEast,r=t.getSouthWest(),a=t.getNorthEast(),c=a.lat>e.lat&&r.lat<i.lat,d=a.lng>e.lng&&r.lng<i.lng;return c&&d},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=K(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function K(t,e){return t instanceof at?t:new at(t,e)}function Z(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}Z.prototype={equals:function(t,e){if(!t)return!1;t=B(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+gt(this.lat,t)+", "+gt(this.lng,t)+")"},distanceTo:function(t){return qt.distance(this,B(t))},wrap:function(){return qt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return K([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new Z(this.lat,this.lng,this.alt)}};function B(t,e,i){return t instanceof Z?t:kt(t)&&typeof t[0]!="object"?t.length===3?new Z(t[0],t[1],t[2]):t.length===2?new Z(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Z(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new Z(t,e,i)}var Ot={latLngToPoint:function(t,e){var i=this.projection.project(t),r=this.scale(e);return this.transformation._transform(i,r)},pointToLatLng:function(t,e){var i=this.scale(e),r=this.transformation.untransform(t,i);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),r=this.transformation.transform(e.min,i),a=this.transformation.transform(e.max,i);return new W(r,a)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?N(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?N(t.lat,this.wrapLat,!0):t.lat,r=t.alt;return new Z(i,e,r)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),r=e.lat-i.lat,a=e.lng-i.lng;if(r===0&&a===0)return t;var c=t.getSouthWest(),d=t.getNorthEast(),m=new Z(c.lat-r,c.lng-a),p=new Z(d.lat-r,d.lng-a);return new at(m,p)}},qt=u({},Ot,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,r=t.lat*i,a=e.lat*i,c=Math.sin((e.lat-t.lat)*i/2),d=Math.sin((e.lng-t.lng)*i/2),m=c*c+Math.cos(r)*Math.cos(a)*d*d,p=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return this.R*p}}),oo=6378137,Hi={R:oo,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,r=Math.max(Math.min(i,t.lat),-i),a=Math.sin(r*e);return new S(this.R*t.lng*e,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(t){var e=180/Math.PI;return new Z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=oo*Math.PI;return new W([-t,-t],[t,t])}()};function Ui(t,e,i,r){if(kt(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=r}Ui.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new S((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Te(t,e,i,r){return new Ui(t,e,i,r)}var Wi=u({},qt,{code:"EPSG:3857",projection:Hi,transformation:function(){var t=.5/(Math.PI*Hi.R);return Te(t,.5,-t,.5)}()}),Fr=u({},Wi,{code:"EPSG:900913"});function so(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ro(t,e){var i="",r,a,c,d,m,p;for(r=0,c=t.length;r<c;r++){for(m=t[r],a=0,d=m.length;a<d;a++)p=m[a],i+=(a?"L":"M")+p.x+" "+p.y;i+=e?y.svg?"z":"x":""}return i||"M0 0"}var qi=document.documentElement.style,ei="ActiveXObject"in window,Hr=ei&&!document.addEventListener,ao="msLaunchUri"in navigator&&!("documentMode"in document),ji=St("webkit"),lo=St("android"),co=St("android 2")||St("android 3"),Ur=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wr=lo&&St("Google")&&Ur<537&&!("AudioNode"in window),$i=!!window.opera,uo=!ao&&St("chrome"),ho=St("gecko")&&!ji&&!$i&&!ei,qr=!uo&&St("safari"),fo=St("phantom"),mo="OTransition"in qi,jr=navigator.platform.indexOf("Win")===0,po=ei&&"transition"in qi,Vi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!co,go="MozPerspective"in qi,$r=!window.L_DISABLE_3D&&(po||Vi||go)&&!mo&&!fo,Ee=typeof orientation<"u"||St("mobile"),Vr=Ee&&ji,Kr=Ee&&Vi,wo=!window.PointerEvent&&window.MSPointerEvent,vo=!!(window.PointerEvent||wo),_o="ontouchstart"in window||!!window.TouchEvent,Gr=!window.L_NO_TOUCH&&(_o||vo),Jr=Ee&&$i,Yr=Ee&&ho,Xr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qr=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",U,e),window.removeEventListener("testPassiveEventSupport",U,e)}catch{}return t}(),ta=function(){return!!document.createElement("canvas").getContext}(),Ki=!!(document.createElementNS&&so("svg").createSVGRect),ea=!!Ki&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ia=!Ki&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),na=navigator.platform.indexOf("Mac")===0,oa=navigator.platform.indexOf("Linux")===0;function St(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var y={ie:ei,ielt9:Hr,edge:ao,webkit:ji,android:lo,android23:co,androidStock:Wr,opera:$i,chrome:uo,gecko:ho,safari:qr,phantom:fo,opera12:mo,win:jr,ie3d:po,webkit3d:Vi,gecko3d:go,any3d:$r,mobile:Ee,mobileWebkit:Vr,mobileWebkit3d:Kr,msPointer:wo,pointer:vo,touch:Gr,touchNative:_o,mobileOpera:Jr,mobileGecko:Yr,retina:Xr,passiveEvents:Qr,canvas:ta,svg:Ki,vml:ia,inlineSvg:ea,mac:na,linux:oa},bo=y.msPointer?"MSPointerDown":"pointerdown",yo=y.msPointer?"MSPointerMove":"pointermove",ko=y.msPointer?"MSPointerUp":"pointerup",xo=y.msPointer?"MSPointerCancel":"pointercancel",Gi={touchstart:bo,touchmove:yo,touchend:ko,touchcancel:xo},Lo={touchstart:ua,touchmove:ii,touchend:ii,touchcancel:ii},le={},Po=!1;function sa(t,e,i){return e==="touchstart"&&ca(),Lo[e]?(i=Lo[e].bind(this,i),t.addEventListener(Gi[e],i,!1),i):(console.warn("wrong event specified:",e),U)}function ra(t,e,i){if(!Gi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Gi[e],i,!1)}function aa(t){le[t.pointerId]=t}function la(t){le[t.pointerId]&&(le[t.pointerId]=t)}function Co(t){delete le[t.pointerId]}function ca(){Po||(document.addEventListener(bo,aa,!0),document.addEventListener(yo,la,!0),document.addEventListener(ko,Co,!0),document.addEventListener(xo,Co,!0),Po=!0)}function ii(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in le)e.touches.push(le[i]);e.changedTouches=[e],t(e)}}function ua(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Q(e),ii(t,e)}function da(t){var e={},i,r;for(r in t)i=t[r],e[r]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var ha=200;function fa(t,e){t.addEventListener("dblclick",e);var i=0,r;function a(c){if(c.detail!==1){r=c.detail;return}if(!(c.pointerType==="mouse"||c.sourceCapabilities&&!c.sourceCapabilities.firesTouchEvents)){var d=Bo(c);if(!(d.some(function(p){return p instanceof HTMLLabelElement&&p.attributes.for})&&!d.some(function(p){return p instanceof HTMLInputElement||p instanceof HTMLSelectElement}))){var m=Date.now();m-i<=ha?(r++,r===2&&e(da(c))):r=1,i=m}}}return t.addEventListener("click",a),{dblclick:e,simDblclick:a}}function ma(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Ji=si(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ae=si(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),So=Ae==="webkitTransition"||Ae==="OTransition"?Ae+"End":"transitionend";function To(t){return typeof t=="string"?document.getElementById(t):t}function Be(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);i=r?r[e]:null}return i==="auto"?null:i}function O(t,e,i){var r=document.createElement(t);return r.className=e||"",i&&i.appendChild(r),r}function q(t){var e=t.parentNode;e&&e.removeChild(t)}function ni(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ce(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ue(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Yi(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=oi(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function E(t,e){if(t.classList!==void 0)for(var i=Ct(e),r=0,a=i.length;r<a;r++)t.classList.add(i[r]);else if(!Yi(t,e)){var c=oi(t);Xi(t,(c?c+" ":"")+e)}}function j(t,e){t.classList!==void 0?t.classList.remove(e):Xi(t,ae((" "+oi(t)+" ").replace(" "+e+" "," ")))}function Xi(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function oi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function vt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&pa(t,e)}function pa(t,e){var i=!1,r="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(r)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}function si(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function Gt(t,e,i){var r=e||new S(0,0);t.style[Ji]=(y.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(i?" scale("+i+")":"")}function G(t,e){t._leaflet_pos=e,y.any3d?Gt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Jt(t){return t._leaflet_pos||new S(0,0)}var Me,Ie,Qi;if("onselectstart"in document)Me=function(){T(window,"selectstart",Q)},Ie=function(){R(window,"selectstart",Q)};else{var Oe=si(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Me=function(){if(Oe){var t=document.documentElement.style;Qi=t[Oe],t[Oe]="none"}},Ie=function(){Oe&&(document.documentElement.style[Oe]=Qi,Qi=void 0)}}function tn(){T(window,"dragstart",Q)}function en(){R(window,"dragstart",Q)}var ri,nn;function on(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ai(),ri=t,nn=t.style.outlineStyle,t.style.outlineStyle="none",T(window,"keydown",ai))}function ai(){ri&&(ri.style.outlineStyle=nn,ri=void 0,nn=void 0,R(window,"keydown",ai))}function Eo(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function sn(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ga={__proto__:null,TRANSFORM:Ji,TRANSITION:Ae,TRANSITION_END:So,get:To,getStyle:Be,create:O,remove:q,empty:ni,toFront:ce,toBack:ue,hasClass:Yi,addClass:E,removeClass:j,setClass:Xi,getClass:oi,setOpacity:vt,testProp:si,setTransform:Gt,setPosition:G,getPosition:Jt,get disableTextSelection(){return Me},get enableTextSelection(){return Ie},disableImageDrag:tn,enableImageDrag:en,preventOutline:on,restoreOutline:ai,getSizedParentNode:Eo,getScale:sn};function T(t,e,i,r){if(e&&typeof e=="object")for(var a in e)an(t,a,e[a],i);else{e=Ct(e);for(var c=0,d=e.length;c<d;c++)an(t,e[c],i,r)}return this}var Tt="_leaflet_events";function R(t,e,i,r){if(arguments.length===1)Ao(t),delete t[Tt];else if(e&&typeof e=="object")for(var a in e)ln(t,a,e[a],i);else if(e=Ct(e),arguments.length===2)Ao(t,function(m){return Zi(e,m)!==-1});else for(var c=0,d=e.length;c<d;c++)ln(t,e[c],i,r);return this}function Ao(t,e){for(var i in t[Tt]){var r=i.split(/\d/)[0];(!e||e(r))&&ln(t,r,null,null,i)}}var rn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function an(t,e,i,r){var a=e+w(i)+(r?"_"+w(r):"");if(t[Tt]&&t[Tt][a])return this;var c=function(m){return i.call(r||t,m||window.event)},d=c;!y.touchNative&&y.pointer&&e.indexOf("touch")===0?c=sa(t,e,c):y.touch&&e==="dblclick"?c=fa(t,c):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(rn[e]||e,c,y.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(c=function(m){m=m||window.event,un(t,m)&&d(m)},t.addEventListener(rn[e],c,!1)):t.addEventListener(e,d,!1):t.attachEvent("on"+e,c),t[Tt]=t[Tt]||{},t[Tt][a]=c}function ln(t,e,i,r,a){a=a||e+w(i)+(r?"_"+w(r):"");var c=t[Tt]&&t[Tt][a];if(!c)return this;!y.touchNative&&y.pointer&&e.indexOf("touch")===0?ra(t,e,c):y.touch&&e==="dblclick"?ma(t,c):"removeEventListener"in t?t.removeEventListener(rn[e]||e,c,!1):t.detachEvent("on"+e,c),t[Tt][a]=null}function Yt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function cn(t){return an(t,"wheel",Yt),this}function ze(t){return T(t,"mousedown touchstart dblclick contextmenu",Yt),t._leaflet_disable_click=!0,this}function Q(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Xt(t){return Q(t),Yt(t),this}function Bo(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function Mo(t,e){if(!e)return new S(t.clientX,t.clientY);var i=sn(e),r=i.boundingClientRect;return new S((t.clientX-r.left)/i.x-e.clientLeft,(t.clientY-r.top)/i.y-e.clientTop)}var wa=y.linux&&y.chrome?window.devicePixelRatio:y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Io(t){return y.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/wa:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function un(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var va={__proto__:null,on:T,off:R,stopPropagation:Yt,disableScrollPropagation:cn,disableClickPropagation:ze,preventDefault:Q,stop:Xt,getPropagationPath:Bo,getMousePosition:Mo,getWheelDelta:Io,isExternalTarget:un,addListener:T,removeListener:R},Oo=Se.extend({run:function(t,e,i,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Jt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=st(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),G(this._el,i),this.fire("step")},_complete:function(){wt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),M=Se.extend({options:{crs:Wi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=H(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ae&&y.any3d&&!y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),T(this._proxy,So,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(B(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=u({animate:i.animate},i.zoom),i.pan=u({animate:i.animate,duration:i.duration},i.pan));var r=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var r=this.getZoomScale(e),a=this.getSize().divideBy(2),c=t instanceof S?t:this.latLngToContainerPoint(t),d=c.subtract(a).multiplyBy(1-1/r),m=this.containerPointToLatLng(a.add(d));return this.setView(m,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():K(t);var i=C(e.paddingTopLeft||e.padding||[0,0]),r=C(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,i.add(r));if(a=typeof e.maxZoom=="number"?Math.min(e.maxZoom,a):a,a===1/0)return{center:t.getCenter(),zoom:a};var c=r.subtract(i).divideBy(2),d=this.project(t.getSouthWest(),a),m=this.project(t.getNorthEast(),a),p=this.unproject(d.add(m).divideBy(2).add(c),a);return{center:p,zoom:a}},fitBounds:function(t,e){if(t=K(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=C(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Oo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){E(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!y.any3d)return this.setView(t,e,i);this._stop();var r=this.project(this.getCenter()),a=this.project(t),c=this.getSize(),d=this._zoom;t=B(t),e=e===void 0?d:e;var m=Math.max(c.x,c.y),p=m*this.getZoomScale(d,e),v=a.distanceTo(r)||1,b=1.42,P=b*b;function A(J){var _i=J?-1:1,rl=J?p:m,al=p*p-m*m+_i*P*P*v*v,ll=2*rl*P*v,yn=al/ll,ms=Math.sqrt(yn*yn+1)-yn,cl=ms<1e-9?-18:Math.log(ms);return cl}function et(J){return(Math.exp(J)-Math.exp(-J))/2}function Y(J){return(Math.exp(J)+Math.exp(-J))/2}function bt(J){return et(J)/Y(J)}var lt=A(0);function ge(J){return m*(Y(lt)/Y(lt+b*J))}function il(J){return m*(Y(lt)*bt(lt+b*J)-et(lt))/P}function nl(J){return 1-Math.pow(1-J,1.5)}var ol=Date.now(),hs=(A(1)-lt)/b,sl=i.duration?1e3*i.duration:1e3*hs*.8;function fs(){var J=(Date.now()-ol)/sl,_i=nl(J)*hs;J<=1?(this._flyToFrame=st(fs,this),this._move(this.unproject(r.add(a.subtract(r).multiplyBy(il(_i)/v)),d),this.getScaleZoom(m/ge(_i),d),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),fs.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=K(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),r=this._limitCenter(i,this._zoom,K(t));return i.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=C(e.paddingTopLeft||e.padding||[0,0]),r=C(e.paddingBottomRight||e.padding||[0,0]),a=this.project(this.getCenter()),c=this.project(t),d=this.getPixelBounds(),m=rt([d.min.add(i),d.max.subtract(r)]),p=m.getSize();if(!m.contains(c)){this._enforcingBounds=!0;var v=c.subtract(m.getCenter()),b=m.extend(c).getSize().subtract(p);a.x+=v.x<0?-b.x:b.x,a.y+=v.y<0?-b.y:b.y,this.panTo(this.unproject(a),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=e.divideBy(2).round(),a=i.divideBy(2).round(),c=r.subtract(a);return!c.x&&!c.y?this:(t.animate&&t.pan?this.panBy(c):(t.pan&&this._rawPanBy(c),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=f(this._handleGeolocationResponse,this),i=f(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,r=new Z(e,i),a=r.toBounds(t.coords.accuracy*2),c=this._locateOptions;if(c.setView){var d=this.getBoundsZoom(a);this.setView(r,c.maxZoom?Math.min(d,c.maxZoom):d)}var m={latlng:r,bounds:a,timestamp:t.timestamp};for(var p in t.coords)typeof t.coords[p]=="number"&&(m[p]=t.coords[p]);this.fire("locationfound",m)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(wt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)q(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=O("div",i,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new at(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=K(t),i=C(i||[0,0]);var r=this.getZoom()||0,a=this.getMinZoom(),c=this.getMaxZoom(),d=t.getNorthWest(),m=t.getSouthEast(),p=this.getSize().subtract(i),v=rt(this.project(m,r),this.project(d,r)).getSize(),b=y.any3d?this.options.zoomSnap:1,P=p.x/v.x,A=p.y/v.y,et=e?Math.max(P,A):Math.min(P,A);return r=this.getScaleZoom(et,r),b&&(r=Math.round(r/(b/100))*(b/100),r=e?Math.ceil(r/b)*b:Math.floor(r/b)*b),Math.max(a,Math.min(c,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new S(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new W(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var r=i.zoom(t*i.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(C(t),e)},layerPointToLatLng:function(t){var e=C(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(B(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(K(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return C(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return C(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(C(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return Mo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=To(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");T(e,"scroll",this._onScroll,this),this._containerId=w(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&y.any3d,E(t,"leaflet-container"+(y.touch?" leaflet-touch":"")+(y.retina?" leaflet-retina":"")+(y.ielt9?" leaflet-oldie":"")+(y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Be(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),G(this._mapPane,new S(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(E(t.markerPane,"leaflet-zoom-hide"),E(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){G(this._mapPane,new S(0,0));var r=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var a=this._zoom!==e;this._moveStart(a,i)._move(t,e)._moveEnd(a),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,r){e===void 0&&(e=this._zoom);var a=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?i&&i.pinch&&this.fire("zoom",i):((a||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return wt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){G(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[w(this._container)]=this;var e=t?R:T;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),y.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){wt(this._resizeRequest),this._resizeRequest=st(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],r,a=e==="mouseout"||e==="mouseover",c=t.target||t.srcElement,d=!1;c;){if(r=this._targets[w(c)],r&&(e==="click"||e==="preclick")&&this._draggableMoved(r)){d=!0;break}if(r&&r.listens(e,!0)&&(a&&!un(c,t)||(i.push(r),a))||c===this._container)break;c=c.parentNode}return!i.length&&!d&&!a&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&on(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var r=u({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var a=this._findEventTargets(t,e);if(i){for(var c=[],d=0;d<i.length;d++)i[d].listens(e,!0)&&c.push(i[d]);a=c.concat(a)}if(a.length){e==="contextmenu"&&Q(t);var m=a[0],p={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var v=m.getLatLng&&(!m._radius||m._radius<=10);p.containerPoint=v?this.latLngToContainerPoint(m.getLatLng()):this.mouseEventToContainerPoint(t),p.layerPoint=this.containerPointToLayerPoint(p.containerPoint),p.latlng=v?m.getLatLng():this.layerPointToLatLng(p.layerPoint)}for(d=0;d<a.length;d++)if(a[d].fire(e,p,!0),p.originalEvent._stopped||a[d].options.bubblingMouseEvents===!1&&Zi(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Jt(this._mapPane)||new S(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var r=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,i){var r=this._getNewPixelOrigin(i,e);return rt([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var r=this.project(t,e),a=this.getSize().divideBy(2),c=new W(r.subtract(a),r.add(a)),d=this._getBoundsOffset(c,i,e);return Math.abs(d.x)<=1&&Math.abs(d.y)<=1?t:this.unproject(r.add(d),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),r=new W(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,i){var r=rt(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),a=r.min.subtract(t.min),c=r.max.subtract(t.max),d=this._rebound(a.x,-c.x),m=this._rebound(a.y,-c.y);return new S(d,m)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),r=y.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){j(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=O("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=Ji,r=this._proxy.style[i];Gt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),r===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){q(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Gt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),a=this._getCenterOffset(t)._divideBy(1-1/r);return i.animate!==!0&&!this.getSize().contains(a)?!1:(st(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,E(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&j(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function _a(t,e){return new M(t,e)}var xt=It.extend({options:{position:"topright"},initialize:function(t){H(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),r=t._controlCorners[i];return E(e,"leaflet-control"),i.indexOf("bottom")!==-1?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(q(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),De=function(t){return new xt(t)};M.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=O("div",e+"control-container",this._container);function r(a,c){var d=e+a+" "+e+c;t[a+c]=O("div",d,i)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)q(this._controlCorners[t]);q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var zo=xt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,r){return i<r?-1:r<i?1:0}},initialize:function(t,e,i){H(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var r in t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return xt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(w(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){E(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(E(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):j(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return j(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=O("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ze(e),cn(e);var r=this._section=O("section",t+"-list");i&&(this._map.on("click",this.collapse,this),T(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=O("a",t+"-toggle",e);a.href="#",a.title="Layers",a.setAttribute("role","button"),T(a,{keydown:function(c){c.keyCode===13&&this._expandSafely()},click:function(c){Q(c),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=O("div",t+"-base",r),this._separator=O("div",t+"-separator",r),this._overlaysList=O("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&w(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(f(function(r,a){return this.options.sortFunction(r.layer,a.layer,r.name,a.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ni(this._baseLayersList),ni(this._overlaysList),this._layerControlInputs=[];var t,e,i,r,a=0;for(i=0;i<this._layers.length;i++)r=this._layers[i],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,a+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&a>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(w(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=i,r.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),r;t.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=i):r=this._createRadioElement("leaflet-base-layers_"+w(this),i),this._layerControlInputs.push(r),r.layerId=w(t.layer),T(r,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+t.name;var c=document.createElement("span");e.appendChild(c),c.appendChild(r),c.appendChild(a);var d=t.overlay?this._overlaysList:this._baseLayersList;return d.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,r=[],a=[];this._handlingClick=!0;for(var c=t.length-1;c>=0;c--)e=t[c],i=this._getLayer(e.layerId).layer,e.checked?r.push(i):e.checked||a.push(i);for(c=0;c<a.length;c++)this._map.hasLayer(a[c])&&this._map.removeLayer(a[c]);for(c=0;c<r.length;c++)this._map.hasLayer(r[c])||this._map.addLayer(r[c]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,r=this._map.getZoom(),a=t.length-1;a>=0;a--)e=t[a],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&r<i.options.minZoom||i.options.maxZoom!==void 0&&r>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,T(t,"click",Q),this.expand();var e=this;setTimeout(function(){R(t,"click",Q),e._preventClick=!1})}}),ba=function(t,e,i){return new zo(t,e,i)},dn=xt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=O("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,r,a){var c=O("a",i,r);return c.innerHTML=t,c.href="#",c.title=e,c.setAttribute("role","button"),c.setAttribute("aria-label",e),ze(c),T(c,"click",Xt),T(c,"click",a,this),T(c,"click",this._refocusOnMap,this),c},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";j(this._zoomInButton,e),j(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(E(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(E(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});M.mergeOptions({zoomControl:!0}),M.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new dn,this.addControl(this.zoomControl))});var ya=function(t){return new dn(t)},Do=xt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=O("div",e),r=this.options;return this._addScales(r,e+"-line",i),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=O("div",e,i)),t.imperial&&(this._iScale=O("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,r,a;e>5280?(i=e/5280,r=this._getRoundNum(i),this._updateScale(this._iScale,r+" mi",r/i)):(a=this._getRoundNum(e),this._updateScale(this._iScale,a+" ft",a/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),ka=function(t){return new Do(t)},xa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hn=xt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(y.inlineSvg?xa+" ":"")+"Leaflet</a>"},initialize:function(t){H(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=O("div","leaflet-control-attribution"),ze(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});M.mergeOptions({attributionControl:!0}),M.addInitHook(function(){this.options.attributionControl&&new hn().addTo(this)});var La=function(t){return new hn(t)};xt.Layers=zo,xt.Zoom=dn,xt.Scale=Do,xt.Attribution=hn,De.layers=ba,De.zoom=ya,De.scale=ka,De.attribution=La;var Et=It.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Et.addTo=function(t,e){return t.addHandler(e,this),this};var Pa={Events:ut},No=y.touch?"touchstart mousedown":"mousedown",jt=Se.extend({options:{clickTolerance:3},initialize:function(t,e,i,r){H(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(T(this._dragStartTarget,No,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(jt._dragging===this&&this.finishDrag(!0),R(this._dragStartTarget,No,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Yi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){jt._dragging===this&&this.finishDrag();return}if(!(jt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(jt._dragging=this,this._preventOutline&&on(this._element),tn(),Me(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=Eo(this._element);this._startPoint=new S(e.clientX,e.clientY),this._startPos=Jt(this._element),this._parentScale=sn(i);var r=t.type==="mousedown";T(document,r?"mousemove":"touchmove",this._onMove,this),T(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new S(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Q(t),this._moved||(this.fire("dragstart"),this._moved=!0,E(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),E(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),G(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){j(document.body,"leaflet-dragging"),this._lastTarget&&(j(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),R(document,"mousemove touchmove",this._onMove,this),R(document,"mouseup touchend touchcancel",this._onUp,this),en(),Ie();var e=this._moved&&this._moving;this._moving=!1,jt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Zo(t,e,i){var r,a=[1,4,2,8],c,d,m,p,v,b,P,A;for(c=0,b=t.length;c<b;c++)t[c]._code=Qt(t[c],e);for(m=0;m<4;m++){for(P=a[m],r=[],c=0,b=t.length,d=b-1;c<b;d=c++)p=t[c],v=t[d],p._code&P?v._code&P||(A=li(v,p,P,e,i),A._code=Qt(A,e),r.push(A)):(v._code&P&&(A=li(v,p,P,e,i),A._code=Qt(A,e),r.push(A)),r.push(p));t=r}return t}function Ro(t,e){var i,r,a,c,d,m,p,v,b;if(!t||t.length===0)throw new Error("latlngs not passed");_t(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var P=B([0,0]),A=K(t),et=A.getNorthWest().distanceTo(A.getSouthWest())*A.getNorthEast().distanceTo(A.getNorthWest());et<1700&&(P=fn(t));var Y=t.length,bt=[];for(i=0;i<Y;i++){var lt=B(t[i]);bt.push(e.project(B([lt.lat-P.lat,lt.lng-P.lng])))}for(m=p=v=0,i=0,r=Y-1;i<Y;r=i++)a=bt[i],c=bt[r],d=a.y*c.x-c.y*a.x,p+=(a.x+c.x)*d,v+=(a.y+c.y)*d,m+=d*3;m===0?b=bt[0]:b=[p/m,v/m];var ge=e.unproject(C(b));return B([ge.lat+P.lat,ge.lng+P.lng])}function fn(t){for(var e=0,i=0,r=0,a=0;a<t.length;a++){var c=B(t[a]);e+=c.lat,i+=c.lng,r++}return B([e/r,i/r])}var Ca={__proto__:null,clipPolygon:Zo,polygonCenter:Ro,centroid:fn};function Fo(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=Ea(t,i),t=Ta(t,i),t}function Ho(t,e,i){return Math.sqrt(Ne(t,e,i,!0))}function Sa(t,e,i){return Ne(t,e,i)}function Ta(t,e){var i=t.length,r=typeof Uint8Array<"u"?Uint8Array:Array,a=new r(i);a[0]=a[i-1]=1,mn(t,a,e,0,i-1);var c,d=[];for(c=0;c<i;c++)a[c]&&d.push(t[c]);return d}function mn(t,e,i,r,a){var c=0,d,m,p;for(m=r+1;m<=a-1;m++)p=Ne(t[m],t[r],t[a],!0),p>c&&(d=m,c=p);c>i&&(e[d]=1,mn(t,e,i,r,d),mn(t,e,i,d,a))}function Ea(t,e){for(var i=[t[0]],r=1,a=0,c=t.length;r<c;r++)Aa(t[r],t[a])>e&&(i.push(t[r]),a=r);return a<c-1&&i.push(t[c-1]),i}var Uo;function Wo(t,e,i,r,a){var c=r?Uo:Qt(t,i),d=Qt(e,i),m,p,v;for(Uo=d;;){if(!(c|d))return[t,e];if(c&d)return!1;m=c||d,p=li(t,e,m,i,a),v=Qt(p,i),m===c?(t=p,c=v):(e=p,d=v)}}function li(t,e,i,r,a){var c=e.x-t.x,d=e.y-t.y,m=r.min,p=r.max,v,b;return i&8?(v=t.x+c*(p.y-t.y)/d,b=p.y):i&4?(v=t.x+c*(m.y-t.y)/d,b=m.y):i&2?(v=p.x,b=t.y+d*(p.x-t.x)/c):i&1&&(v=m.x,b=t.y+d*(m.x-t.x)/c),new S(v,b,a)}function Qt(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Aa(t,e){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function Ne(t,e,i,r){var a=e.x,c=e.y,d=i.x-a,m=i.y-c,p=d*d+m*m,v;return p>0&&(v=((t.x-a)*d+(t.y-c)*m)/p,v>1?(a=i.x,c=i.y):v>0&&(a+=d*v,c+=m*v)),d=t.x-a,m=t.y-c,r?d*d+m*m:new S(a,c)}function _t(t){return!kt(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function qo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_t(t)}function jo(t,e){var i,r,a,c,d,m,p,v;if(!t||t.length===0)throw new Error("latlngs not passed");_t(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var b=B([0,0]),P=K(t),A=P.getNorthWest().distanceTo(P.getSouthWest())*P.getNorthEast().distanceTo(P.getNorthWest());A<1700&&(b=fn(t));var et=t.length,Y=[];for(i=0;i<et;i++){var bt=B(t[i]);Y.push(e.project(B([bt.lat-b.lat,bt.lng-b.lng])))}for(i=0,r=0;i<et-1;i++)r+=Y[i].distanceTo(Y[i+1])/2;if(r===0)v=Y[0];else for(i=0,c=0;i<et-1;i++)if(d=Y[i],m=Y[i+1],a=d.distanceTo(m),c+=a,c>r){p=(c-r)/a,v=[m.x-p*(m.x-d.x),m.y-p*(m.y-d.y)];break}var lt=e.unproject(C(v));return B([lt.lat+b.lat,lt.lng+b.lng])}var Ba={__proto__:null,simplify:Fo,pointToSegmentDistance:Ho,closestPointOnSegment:Sa,clipSegment:Wo,_getEdgeIntersection:li,_getBitCode:Qt,_sqClosestPointOnSegment:Ne,isFlat:_t,_flat:qo,polylineCenter:jo},pn={project:function(t){return new S(t.lng,t.lat)},unproject:function(t){return new Z(t.y,t.x)},bounds:new W([-180,-90],[180,90])},gn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,r=t.lat*e,a=this.R_MINOR/i,c=Math.sqrt(1-a*a),d=c*Math.sin(r),m=Math.tan(Math.PI/4-r/2)/Math.pow((1-d)/(1+d),c/2);return r=-i*Math.log(Math.max(m,1e-10)),new S(t.lng*e*i,r)},unproject:function(t){for(var e=180/Math.PI,i=this.R,r=this.R_MINOR/i,a=Math.sqrt(1-r*r),c=Math.exp(-t.y/i),d=Math.PI/2-2*Math.atan(c),m=0,p=.1,v;m<15&&Math.abs(p)>1e-7;m++)v=a*Math.sin(d),v=Math.pow((1-v)/(1+v),a/2),p=Math.PI/2-2*Math.atan(c*v)-d,d+=p;return new Z(d*e,t.x*e/i)}},Ma={__proto__:null,LonLat:pn,Mercator:gn,SphericalMercator:Hi},Ia=u({},qt,{code:"EPSG:3395",projection:gn,transformation:function(){var t=.5/(Math.PI*gn.R);return Te(t,.5,-t,.5)}()}),$o=u({},qt,{code:"EPSG:4326",projection:pn,transformation:Te(1/180,1,-1/180,.5)}),Oa=u({},Ot,{projection:pn,transformation:Te(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(i*i+r*r)},infinite:!0});Ot.Earth=qt,Ot.EPSG3395=Ia,Ot.EPSG3857=Wi,Ot.EPSG900913=Fr,Ot.EPSG4326=$o,Ot.Simple=Oa;var Lt=Se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[w(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[w(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});M.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=w(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=w(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return w(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?kt(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[w(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=w(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var r in this._zoomBoundLayers){var a=this._zoomBoundLayers[r].options;t=a.minZoom===void 0?t:Math.min(t,a.minZoom),e=a.maxZoom===void 0?e:Math.max(e,a.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var de=Lt.extend({initialize:function(t,e){H(this,e),this._layers={};var i,r;if(t)for(i=0,r=t.length;i<r;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,r;for(i in this._layers)r=this._layers[i],r[t]&&r[t].apply(r,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return w(t)}}),za=function(t,e){return new de(t,e)},zt=de.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),de.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),de.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new at;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Da=function(t,e){return new zt(t,e)},he=It.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){H(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(r,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),r},_setIconStyles:function(t,e){var i=this.options,r=i[e+"Size"];typeof r=="number"&&(r=[r,r]);var a=C(r),c=C(e==="shadow"&&i.shadowAnchor||i.iconAnchor||a&&a.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),c&&(t.style.marginLeft=-c.x+"px",t.style.marginTop=-c.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return y.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Na(t){return new he(t)}var Ze=he.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ze.imagePath!="string"&&(Ze.imagePath=this._detectIconPath()),(this.options.imagePath||Ze.imagePath)+he.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,r,a){var c=r.exec(i);return c&&c[a]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=O("div","leaflet-default-icon-path",document.body),e=Be(t,"background-image")||Be(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Vo=Et.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new jt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),E(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&j(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,r=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,c=Jt(e._icon),d=i.getPixelBounds(),m=i.getPixelOrigin(),p=rt(d.min._subtract(m).add(a),d.max._subtract(m).subtract(a));if(!p.contains(c)){var v=C((Math.max(p.max.x,c.x)-p.max.x)/(d.max.x-p.max.x)-(Math.min(p.min.x,c.x)-p.min.x)/(d.min.x-p.min.x),(Math.max(p.max.y,c.y)-p.max.y)/(d.max.y-p.max.y)-(Math.min(p.min.y,c.y)-p.min.y)/(d.min.y-p.min.y)).multiplyBy(r);i.panBy(v,{animate:!1}),this._draggable._newPos._add(v),this._draggable._startPos._add(v),G(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=st(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(wt(this._panRequest),this._panRequest=st(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,r=Jt(e._icon),a=e._map.layerPointToLatLng(r);i&&G(i,r),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){wt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ci=Lt.extend({options:{icon:new Ze,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){H(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),r=!1;i!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),E(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&T(i,"focus",this._panOnFocus,this);var a=t.icon.createShadow(this._shadow),c=!1;a!==this._shadow&&(this._removeShadow(),c=!0),a&&(E(a,e),a.alt=""),this._shadow=a,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&c&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&R(this._icon,"focus",this._panOnFocus,this),q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&q(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&G(this._icon,t),this._shadow&&G(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(E(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Vo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Vo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&vt(this._icon,t),this._shadow&&vt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?C(e.iconSize):C(0,0),r=e.iconAnchor?C(e.iconAnchor):C(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:i.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Za(t,e){return new ci(t,e)}var $t=Lt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return H(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ui=$t.extend({options:{fill:!0,radius:10},initialize:function(t,e){H(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return $t.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),r=[t+i,e+i];this._pxBounds=new W(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ra(t,e){return new ui(t,e)}var wn=ui.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=u({},i,{radius:e})),H(this,e),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new at(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:$t.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,r=i.options.crs;if(r.distance===qt.distance){var a=Math.PI/180,c=this._mRadius/qt.R/a,d=i.project([e+c,t]),m=i.project([e-c,t]),p=d.add(m).divideBy(2),v=i.unproject(p).lat,b=Math.acos((Math.cos(c*a)-Math.sin(e*a)*Math.sin(v*a))/(Math.cos(e*a)*Math.cos(v*a)))/a;(isNaN(b)||b===0)&&(b=c/Math.cos(Math.PI/180*e)),this._point=p.subtract(i.getPixelOrigin()),this._radius=isNaN(b)?0:p.x-i.project([v,t-b]).x,this._radiusY=p.y-d.y}else{var P=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(P).x}this._updateBounds()}});function Fa(t,e,i){return new wn(t,e,i)}var Dt=$t.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){H(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,r=Ne,a,c,d=0,m=this._parts.length;d<m;d++)for(var p=this._parts[d],v=1,b=p.length;v<b;v++){a=p[v-1],c=p[v];var P=r(t,a,c,!0);P<e&&(e=P,i=r(t,a,c))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new at,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return _t(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=_t(t),r=0,a=t.length;r<a;r++)i?(e[r]=B(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new S(t,t);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var r=t[0]instanceof Z,a=t.length,c,d;if(r){for(d=[],c=0;c<a;c++)d[c]=this._map.latLngToLayerPoint(t[c]),i.extend(d[c]);e.push(d)}else for(c=0;c<a;c++)this._projectLatlngs(t[c],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,r,a,c,d,m,p;for(i=0,a=0,c=this._rings.length;i<c;i++)for(p=this._rings[i],r=0,d=p.length;r<d-1;r++)m=Wo(p[r],p[r+1],t,r,!0),m&&(e[a]=e[a]||[],e[a].push(m[0]),(m[1]!==p[r+1]||r===d-2)&&(e[a].push(m[1]),a++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,r=t.length;i<r;i++)t[i]=Fo(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,r,a,c,d,m,p=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,c=this._parts.length;i<c;i++)for(m=this._parts[i],r=0,d=m.length,a=d-1;r<d;a=r++)if(!(!e&&r===0)&&Ho(t,m[a],m[r])<=p)return!0;return!1}});function Ha(t,e){return new Dt(t,e)}Dt._flat=qo;var fe=Dt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ro(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Dt.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof Z&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Dt.prototype._setLatLngs.call(this,t),_t(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _t(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new S(e,e);if(t=new W(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,a=this._rings.length,c;r<a;r++)c=Zo(this._rings[r],t,!0),c.length&&this._parts.push(c)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,r,a,c,d,m,p,v;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,p=this._parts.length;c<p;c++)for(i=this._parts[c],d=0,v=i.length,m=v-1;d<v;m=d++)r=i[d],a=i[m],r.y>t.y!=a.y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(e=!e);return e||Dt.prototype._containsPoint.call(this,t,!0)}});function Ua(t,e){return new fe(t,e)}var Nt=zt.extend({initialize:function(t,e){H(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=kt(t)?t:t.features,i,r,a;if(e){for(i=0,r=e.length;i<r;i++)a=e[i],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var c=this.options;if(c.filter&&!c.filter(t))return this;var d=di(t,c);return d?(d.feature=mi(t),d.defaultOptions=d.options,this.resetStyle(d),c.onEachFeature&&c.onEachFeature(t,d),this.addLayer(d)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function di(t,e){var i=t.type==="Feature"?t.geometry:t,r=i?i.coordinates:null,a=[],c=e&&e.pointToLayer,d=e&&e.coordsToLatLng||vn,m,p,v,b;if(!r&&!i)return null;switch(i.type){case"Point":return m=d(r),Ko(c,t,m,e);case"MultiPoint":for(v=0,b=r.length;v<b;v++)m=d(r[v]),a.push(Ko(c,t,m,e));return new zt(a);case"LineString":case"MultiLineString":return p=hi(r,i.type==="LineString"?0:1,d),new Dt(p,e);case"Polygon":case"MultiPolygon":return p=hi(r,i.type==="Polygon"?1:2,d),new fe(p,e);case"GeometryCollection":for(v=0,b=i.geometries.length;v<b;v++){var P=di({geometry:i.geometries[v],type:"Feature",properties:t.properties},e);P&&a.push(P)}return new zt(a);case"FeatureCollection":for(v=0,b=i.features.length;v<b;v++){var A=di(i.features[v],e);A&&a.push(A)}return new zt(a);default:throw new Error("Invalid GeoJSON object.")}}function Ko(t,e,i,r){return t?t(e,i):new ci(i,r&&r.markersInheritOptions&&r)}function vn(t){return new Z(t[1],t[0],t[2])}function hi(t,e,i){for(var r=[],a=0,c=t.length,d;a<c;a++)d=e?hi(t[a],e-1,i):(i||vn)(t[a]),r.push(d);return r}function _n(t,e){return t=B(t),t.alt!==void 0?[gt(t.lng,e),gt(t.lat,e),gt(t.alt,e)]:[gt(t.lng,e),gt(t.lat,e)]}function fi(t,e,i,r){for(var a=[],c=0,d=t.length;c<d;c++)a.push(e?fi(t[c],_t(t[c])?0:e-1,i,r):_n(t[c],r));return!e&&i&&a.length>0&&a.push(a[0].slice()),a}function me(t,e){return t.feature?u({},t.feature,{geometry:e}):mi(e)}function mi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var bn={toGeoJSON:function(t){return me(this,{type:"Point",coordinates:_n(this.getLatLng(),t)})}};ci.include(bn),wn.include(bn),ui.include(bn),Dt.include({toGeoJSON:function(t){var e=!_t(this._latlngs),i=fi(this._latlngs,e?1:0,!1,t);return me(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),fe.include({toGeoJSON:function(t){var e=!_t(this._latlngs),i=e&&!_t(this._latlngs[0]),r=fi(this._latlngs,i?2:e?1:0,!0,t);return e||(r=[r]),me(this,{type:(i?"Multi":"")+"Polygon",coordinates:r})}}),de.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),me(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",r=[];return this.eachLayer(function(a){if(a.toGeoJSON){var c=a.toGeoJSON(t);if(i)r.push(c.geometry);else{var d=mi(c);d.type==="FeatureCollection"?r.push.apply(r,d.features):r.push(d)}}}),i?me(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});function Go(t,e){return new Nt(t,e)}var Wa=Go,pi=Lt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=K(e),H(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(E(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ce(this._image),this},bringToBack:function(){return this._map&&ue(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=K(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:O("img");if(E(e,"leaflet-image-layer"),this._zoomAnimated&&E(e,"leaflet-zoom-animated"),this.options.className&&E(e,this.options.className),e.onselectstart=U,e.onmousemove=U,e.onload=f(this.fire,this,"load"),e.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Gt(this._image,i,e)},_reset:function(){var t=this._image,e=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();G(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){vt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),qa=function(t,e,i){return new pi(t,e,i)},Jo=pi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:O("video");if(E(e,"leaflet-image-layer"),this._zoomAnimated&&E(e,"leaflet-zoom-animated"),this.options.className&&E(e,this.options.className),e.onselectstart=U,e.onmousemove=U,e.onloadeddata=f(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),r=[],a=0;a<i.length;a++)r.push(i[a].src);this._url=i.length>0?r:[e.src];return}kt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var c=0;c<this._url.length;c++){var d=O("source");d.src=this._url[c],e.appendChild(d)}}});function ja(t,e,i){return new Jo(t,e,i)}var Yo=pi.extend({_initImage:function(){var t=this._image=this._url;E(t,"leaflet-image-layer"),this._zoomAnimated&&E(t,"leaflet-zoom-animated"),this.options.className&&E(t,this.options.className),t.onselectstart=U,t.onmousemove=U}});function $a(t,e,i){return new Yo(t,e,i)}var At=Lt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof Z||kt(t))?(this._latlng=B(t),H(this,e)):(H(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&vt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&vt(this._container,1),this.bringToFront(),this.options.interactive&&(E(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(vt(this._container,0),this._removeTimeout=setTimeout(f(q,void 0,this._container),200)):q(this._container),this.options.interactive&&(j(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ce(this._container),this},bringToBack:function(){return this._map&&ue(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof zt){e=null;var i=this._source._layers;for(var r in i)if(i[r]._map){e=i[r];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=C(this.options.offset),i=this._getAnchor();this._zoomAnimated?G(this._container,t.add(i)):e=e.add(t).add(i);var r=this._containerBottom=-e.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});M.include({_initOverlay:function(t,e,i,r){var a=e;return a instanceof t||(a=new t(r).setContent(e)),i&&a.setLatLng(i),a}}),Lt.include({_initOverlay:function(t,e,i,r){var a=i;return a instanceof t?(H(a,r),a._source=this):(a=e&&!r?e:new t(r,this),a.setContent(i)),a}});var gi=At.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,At.prototype.openOn.call(this,t)},onAdd:function(t){At.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof $t||this._source.on("preclick",Yt))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof $t||this._source.off("preclick",Yt))},getEvents:function(){var t=At.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=O("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=O("div",t+"-content-wrapper",e);if(this._contentNode=O("div",t+"-content",i),ze(e),cn(this._contentNode),T(e,"contextmenu",Yt),this._tipContainer=O("div",t+"-tip-container",e),this._tip=O("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=O("a",t+"-close-button",e);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',T(r,"click",function(a){Q(a),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,a=this.options.maxHeight,c="leaflet-popup-scrolled";a&&r>a?(e.height=a+"px",E(t,c)):j(t,c),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();G(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Be(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,r=this._containerWidth,a=new S(this._containerLeft,-i-this._containerBottom);a._add(Jt(this._container));var c=t.layerPointToContainerPoint(a),d=C(this.options.autoPanPadding),m=C(this.options.autoPanPaddingTopLeft||d),p=C(this.options.autoPanPaddingBottomRight||d),v=t.getSize(),b=0,P=0;c.x+r+p.x>v.x&&(b=c.x+r-v.x+p.x),c.x-b-m.x<0&&(b=c.x-m.x),c.y+i+p.y>v.y&&(P=c.y+i-v.y+p.y),c.y-P-m.y<0&&(P=c.y-m.y),(b||P)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([b,P]))}},_getAnchor:function(){return C(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Va=function(t,e){return new gi(t,e)};M.mergeOptions({closePopupOnClick:!0}),M.include({openPopup:function(t,e,i){return this._initOverlay(gi,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Lt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(gi,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof zt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Xt(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof $t)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var wi=At.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){At.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=At.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=O("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,r=this._map,a=this._container,c=r.latLngToContainerPoint(r.getCenter()),d=r.layerPointToContainerPoint(t),m=this.options.direction,p=a.offsetWidth,v=a.offsetHeight,b=C(this.options.offset),P=this._getAnchor();m==="top"?(e=p/2,i=v):m==="bottom"?(e=p/2,i=0):m==="center"?(e=p/2,i=v/2):m==="right"?(e=0,i=v/2):m==="left"?(e=p,i=v/2):d.x<c.x?(m="right",e=0,i=v/2):(m="left",e=p+(b.x+P.x)*2,i=v/2),t=t.subtract(C(e,i,!0)).add(b).add(P),j(a,"leaflet-tooltip-right"),j(a,"leaflet-tooltip-left"),j(a,"leaflet-tooltip-top"),j(a,"leaflet-tooltip-bottom"),E(a,"leaflet-tooltip-"+m),G(a,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&vt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return C(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ka=function(t,e){return new wi(t,e)};M.include({openTooltip:function(t,e,i){return this._initOverlay(wi,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Lt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wi,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof zt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(T(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),T(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,r;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),r=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(e)}});var Xo=he.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(ni(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var r=C(i.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ga(t){return new Xo(t)}he.Default=Ze;var Re=Lt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){H(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),q(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof S?t:new S(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),r=0,a=e.length,c;r<a;r++)c=e[r].style.zIndex,e[r]!==this._container&&c&&(i=t(i,+c));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!y.ielt9){vt(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var r in this._tiles){var a=this._tiles[r];if(!(!a.current||!a.loaded)){var c=Math.min(1,(t-a.loaded)/200);vt(a.el,c),c<1?e=!0:(a.active?i=!0:this._onOpaqueTile(a),a.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(wt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this))}},_onOpaqueTile:U,_initContainer:function(){this._container||(this._container=O("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(q(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var r=this._levels[t],a=this._map;return r||(r=this._levels[t]={},r.el=O("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=a.project(a.unproject(a.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,a.getCenter(),a.getZoom()),U(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:U,_onRemoveLevel:U,_onCreateLevel:U,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)q(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,r){var a=Math.floor(t/2),c=Math.floor(e/2),d=i-1,m=new S(+a,+c);m.z=+d;var p=this._tileCoordsToKey(m),v=this._tiles[p];return v&&v.active?(v.retain=!0,!0):(v&&v.loaded&&(v.retain=!0),d>r?this._retainParent(a,c,d,r):!1)},_retainChildren:function(t,e,i,r){for(var a=2*t;a<2*t+2;a++)for(var c=2*e;c<2*e+2;c++){var d=new S(a,c);d.z=i+1;var m=this._tileCoordsToKey(d),p=this._tiles[m];if(p&&p.active){p.retain=!0;continue}else p&&p.loaded&&(p.retain=!0);i+1<r&&this._retainChildren(a,c,i+1,r)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,r){var a=Math.round(e);this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom?a=void 0:a=this._clampZoom(a);var c=this.options.updateWhenZooming&&a!==this._tileZoom;(!r||c)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var r=this._map.getZoomScale(i,t.zoom),a=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,i)).round();y.any3d?Gt(t.el,a,r):G(t.el,a)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),r=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(i,this._tileZoom),a=e.project(t,this._tileZoom).floor(),c=e.getSize().divideBy(r*2);return new W(a.subtract(c),a.add(c))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(r),c=a.getCenter(),d=[],m=this.options.keepBuffer,p=new W(a.getBottomLeft().subtract([m,-m]),a.getTopRight().add([m,-m]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var v in this._tiles){var b=this._tiles[v].coords;(b.z!==this._tileZoom||!p.contains(new S(b.x,b.y)))&&(this._tiles[v].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var P=a.min.y;P<=a.max.y;P++)for(var A=a.min.x;A<=a.max.x;A++){var et=new S(A,P);if(et.z=this._tileZoom,!!this._isValidTile(et)){var Y=this._tiles[this._tileCoordsToKey(et)];Y?Y.current=!0:d.push(et)}}if(d.sort(function(lt,ge){return lt.distanceTo(c)-ge.distanceTo(c)}),d.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var bt=document.createDocumentFragment();for(A=0;A<d.length;A++)this._addTile(d[A],bt);this._level.el.appendChild(bt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return K(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),r=t.scaleBy(i),a=r.add(i),c=e.unproject(r,t.z),d=e.unproject(a,t.z);return[c,d]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new at(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new S(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(q(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){E(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=U,t.onmousemove=U,y.ielt9&&this.options.opacity<1&&vt(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),f(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&st(f(this._tileReady,this,t,null,a)),G(a,i),this._tiles[r]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var r=this._tileCoordsToKey(t);i=this._tiles[r],i&&(i.loaded=+new Date,this._map._fadeAnimated?(vt(i.el,0),wt(this._fadeFrame),this._fadeFrame=st(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(E(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),y.ielt9||!this._map._fadeAnimated?st(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new S(this._wrapX?N(t.x,this._wrapX):t.x,this._wrapY?N(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new W(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ja(t){return new Re(t)}var pe=Re.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=H(this,e),e.detectRetina&&y.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return T(i,"load",f(this._tileOnLoad,this,e,i)),T(i,"error",f(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:y.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return Qn(this._url,u(e,this.options))},_tileOnLoad:function(t,e){y.ielt9?setTimeout(f(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,r=this.options.zoomOffset;return i&&(t=e-t),t+r},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=U,e.onerror=U,!e.complete)){e.src=ti;var i=this._tiles[t].coords;q(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",ti),Re.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===ti))return Re.prototype._tileReady.call(this,t,e,i)}});function Qo(t,e){return new pe(t,e)}var ts=pe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=u({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);e=H(this,e);var a=e.detectRetina&&y.retina?2:1,c=this.getTileSize();i.width=c.x*a,i.height=c.y*a,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,pe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,r=rt(i.project(e[0]),i.project(e[1])),a=r.min,c=r.max,d=(this._wmsVersion>=1.3&&this._crs===$o?[a.y,a.x,c.y,c.x]:[a.x,a.y,c.x,c.y]).join(","),m=pe.prototype.getTileUrl.call(this,t);return m+Xn(this.wmsParams,m,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+d},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function Ya(t,e){return new ts(t,e)}pe.WMS=ts,Qo.wms=Ya;var Zt=Lt.extend({options:{padding:.1},initialize:function(t){H(this,t),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),E(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),c=r.multiplyBy(-i).add(a).subtract(this._map._getNewPixelOrigin(t,e));y.any3d?Gt(this._container,c,i):G(this._container,c)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new W(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),es=Zt.extend({options:{tolerance:0},getEvents:function(){var t=Zt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");T(t,"mousemove",this._onMouseMove,this),T(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),T(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){wt(this._redrawRequest),delete this._ctx,q(this._container),R(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zt.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),r=y.retina?2:1;G(e,t.min),e.width=r*i.x,e.height=r*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",y.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Zt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[w(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,r=e.prev;i?i.prev=r:this._drawLast=r,r?r.next=i:this._drawFirst=i,delete t._order,delete this._layers[w(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],r,a;for(a=0;a<e.length;a++){if(r=Number(e[a]),isNaN(r))return;i.push(r)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||st(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,r,a,c,d=t._parts,m=d.length,p=this._ctx;if(m){for(p.beginPath(),i=0;i<m;i++){for(r=0,a=d[i].length;r<a;r++)c=d[i][r],p[r?"lineTo":"moveTo"](c.x,c.y);e&&p.closePath()}this._fillStroke(p,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,r=Math.max(Math.round(t._radius),1),a=(Math.max(Math.round(t._radiusY),1)||r)/r;a!==1&&(i.save(),i.scale(1,a)),i.beginPath(),i.arc(e.x,e.y/a,r,0,Math.PI*2,!1),a!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,r,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(r=i);this._fireEvent(r?[r]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(j(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,r,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(e)&&(r=i);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(E(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,r=e.prev;if(i)i.prev=r;else return;r?r.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,r=e.prev;if(r)r.next=i;else return;i?i.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function is(t){return y.canvas?new es(t):null}var Fe=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Xa={_initContainer:function(){this._container=O("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Fe("shape");E(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Fe("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;q(e),t.removeInteractiveTarget(e),delete this._layers[w(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,r=t.options,a=t._container;a.stroked=!!r.stroke,a.filled=!!r.fill,r.stroke?(e||(e=t._stroke=Fe("stroke")),a.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=kt(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(a.removeChild(e),t._stroke=null),r.fill?(i||(i=t._fill=Fe("fill")),a.appendChild(i),i.color=r.fillColor||r.color,i.opacity=r.fillOpacity):i&&(a.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),r=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+r+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ce(t._container)},_bringToBack:function(t){ue(t._container)}},vi=y.vml?Fe:so,He=Zt.extend({_initContainer:function(){this._container=vi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){q(this._container),R(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),G(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=vi("path");t.options.className&&E(e,t.options.className),t.options.interactive&&E(e,"leaflet-interactive"),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){q(t._path),t.removeInteractiveTarget(t._path),delete this._layers[w(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,ro(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),r=Math.max(Math.round(t._radiusY),1)||i,a="a"+i+","+r+" 0 1,0 ",c=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+a+i*2+",0 "+a+-i*2+",0 ";this._setPath(t,c)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ce(t._path)},_bringToBack:function(t){ue(t._path)}});y.vml&&He.include(Xa);function ns(t){return y.svg||y.vml?new He(t):null}M.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&is(t)||ns(t)}});var os=fe.extend({initialize:function(t,e){fe.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=K(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Qa(t,e){return new os(t,e)}He.create=vi,He.pointsToPath=ro,Nt.geometryToLayer=di,Nt.coordsToLatLng=vn,Nt.coordsToLatLngs=hi,Nt.latLngToCoords=_n,Nt.latLngsToCoords=fi,Nt.getFeature=me,Nt.asFeature=mi,M.mergeOptions({boxZoom:!0});var ss=Et.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){T(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){R(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Me(),tn(),this._startPoint=this._map.mouseEventToContainerPoint(t),T(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=O("div","leaflet-zoom-box",this._container),E(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new W(this._point,this._startPoint),i=e.getSize();G(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(q(this._box),j(this._container,"leaflet-crosshair")),Ie(),en(),R(document,{contextmenu:Xt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var e=new at(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});M.addInitHook("addHandler","boxZoom",ss),M.mergeOptions({doubleClickZoom:!0});var rs=Et.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),r=e.options.zoomDelta,a=t.originalEvent.shiftKey?i-r:i+r;e.options.doubleClickZoom==="center"?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}});M.addInitHook("addHandler","doubleClickZoom",rs),M.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var as=Et.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new jt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}E(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){j(this._map._container,"leaflet-grab"),j(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=K(this._map.options.maxBounds);this._offsetLimit=rt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,r=this._draggable._newPos.x,a=(r-e+i)%t+e-i,c=(r+e+i)%t-e-i,d=Math.abs(a+i)<Math.abs(c+i)?a:c;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=d},_onDragEnd:function(t){var e=this._map,i=e.options,r=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),c=(this._lastTime-this._times[0])/1e3,d=i.easeLinearity,m=a.multiplyBy(d/c),p=m.distanceTo([0,0]),v=Math.min(i.inertiaMaxSpeed,p),b=m.multiplyBy(v/p),P=v/(i.inertiaDeceleration*d),A=b.multiplyBy(-P/2).round();!A.x&&!A.y?e.fire("moveend"):(A=e._limitOffset(A,e.options.maxBounds),st(function(){e.panBy(A,{duration:P,easeLinearity:d,noMoveStart:!0,animate:!0})}))}}});M.addInitHook("addHandler","dragging",as),M.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ls=Et.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),T(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),R(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,r,a;for(r=0,a=i.left.length;r<a;r++)e[i.left[r]]=[-1*t,0];for(r=0,a=i.right.length;r<a;r++)e[i.right[r]]=[t,0];for(r=0,a=i.down.length;r<a;r++)e[i.down[r]]=[0,t];for(r=0,a=i.up.length;r<a;r++)e[i.up[r]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,r,a;for(r=0,a=i.zoomIn.length;r<a;r++)e[i.zoomIn[r]]=t;for(r=0,a=i.zoomOut.length;r<a;r++)e[i.zoomOut[r]]=-t},_addHooks:function(){T(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){R(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,r;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(r=this._panKeys[e],t.shiftKey&&(r=C(r).multiplyBy(3)),i.options.maxBounds&&(r=i._limitOffset(C(r),i.options.maxBounds)),i.options.worldCopyJump){var a=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(r)));i.panTo(a)}else i.panBy(r)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Xt(t)}}});M.addInitHook("addHandler","keyboard",ls),M.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var cs=Et.extend({addHooks:function(){T(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){R(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Io(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),r),Xt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),a=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,c=i?Math.ceil(a/i)*i:a,d=t._limitZoom(e+(this._delta>0?c:-c))-e;this._delta=0,this._startTime=null,d&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+d):t.setZoomAround(this._lastMousePos,e+d))}});M.addInitHook("addHandler","scrollWheelZoom",cs);var tl=600;M.mergeOptions({tapHold:y.touchNative&&y.safari&&y.mobile,tapTolerance:15});var us=Et.extend({addHooks:function(){T(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){R(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new S(e.clientX,e.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(T(document,"touchend",Q),T(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),tl),T(document,"touchend touchcancel contextmenu",this._cancel,this),T(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){R(document,"touchend",Q),R(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),R(document,"touchend touchcancel contextmenu",this._cancel,this),R(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new S(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});M.addInitHook("addHandler","tapHold",us),M.mergeOptions({touchZoom:y.touch,bounceAtZoomLimits:!0});var ds=Et.extend({addHooks:function(){E(this._map._container,"leaflet-touch-zoom"),T(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){j(this._map._container,"leaflet-touch-zoom"),R(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(r)._divideBy(2))),this._startDist=i.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),T(document,"touchmove",this._onTouchMove,this),T(document,"touchend touchcancel",this._onTouchEnd,this),Q(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),a=i.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,a===1)return}else{var c=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(a===1&&c.x===0&&c.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(c),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),wt(this._animRequest);var d=f(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=st(d,this,!0),Q(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,wt(this._animRequest),R(document,"touchmove",this._onTouchMove,this),R(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});M.addInitHook("addHandler","touchZoom",ds),M.BoxZoom=ss,M.DoubleClickZoom=rs,M.Drag=as,M.Keyboard=ls,M.ScrollWheelZoom=cs,M.TapHold=us,M.TouchZoom=ds,s.Bounds=W,s.Browser=y,s.CRS=Ot,s.Canvas=es,s.Circle=wn,s.CircleMarker=ui,s.Class=It,s.Control=xt,s.DivIcon=Xo,s.DivOverlay=At,s.DomEvent=va,s.DomUtil=ga,s.Draggable=jt,s.Evented=Se,s.FeatureGroup=zt,s.GeoJSON=Nt,s.GridLayer=Re,s.Handler=Et,s.Icon=he,s.ImageOverlay=pi,s.LatLng=Z,s.LatLngBounds=at,s.Layer=Lt,s.LayerGroup=de,s.LineUtil=Ba,s.Map=M,s.Marker=ci,s.Mixin=Pa,s.Path=$t,s.Point=S,s.PolyUtil=Ca,s.Polygon=fe,s.Polyline=Dt,s.Popup=gi,s.PosAnimation=Oo,s.Projection=Ma,s.Rectangle=os,s.Renderer=Zt,s.SVG=He,s.SVGOverlay=Yo,s.TileLayer=pe,s.Tooltip=wi,s.Transformation=Ui,s.Util=Zr,s.VideoOverlay=Jo,s.bind=f,s.bounds=rt,s.canvas=is,s.circle=Fa,s.circleMarker=Ra,s.control=De,s.divIcon=Ga,s.extend=u,s.featureGroup=Da,s.geoJSON=Go,s.geoJson=Wa,s.gridLayer=Ja,s.icon=Na,s.imageOverlay=qa,s.latLng=B,s.latLngBounds=K,s.layerGroup=za,s.map=_a,s.marker=Za,s.point=C,s.polygon=Ua,s.polyline=Ha,s.popup=Va,s.rectangle=Qa,s.setOptions=H,s.stamp=w,s.svg=ns,s.svgOverlay=$a,s.tileLayer=Qo,s.tooltip=Ka,s.transformation=Te,s.version=l,s.videoOverlay=ja;var el=window.L;s.noConflict=function(){return window.L=el,this},window.L=s})}(We,We.exports)),We.exports}var it=ed();const Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",Ut={BASE_URL:"https://story-api.dicoding.dev/v1",DEFAULT_MAP_CENTER:[-6.2,106.816666],DEFAULT_MAP_ZOOM:5};class Qe{constructor(n=Ut.BASE_URL){this.baseURL=n}async fetchAllStories(n=1,s=10,l=0){var u;try{const h=`${this.baseURL}/stories?page=${n}&size=${s}&location=${l}`;console.log("Fetching stories from:",h);const f=localStorage.getItem("auth_token"),_={"Content-Type":"application/json"};f?(_.Authorization=`Bearer ${f}`,console.log("Using token for authentication")):console.log("No token found, using guest access");const w=await fetch(h,{method:"GET",headers:_});if(!w.ok){const N=await w.text();throw console.error("API Error Response:",N),new Error(`Failed to fetch stories: ${w.status} ${w.statusText}`)}const x=await w.json();return console.log("Fetched stories count:",((u=x==null?void 0:x.listStory)==null?void 0:u.length)||0),x}catch(h){throw console.error("Error fetching stories:",h),h}}async fetchStoryById(n){try{const s=localStorage.getItem("auth_token"),l={"Content-Type":"application/json"};s&&(l.Authorization=`Bearer ${s}`);const u=await fetch(`${this.baseURL}/stories/${n}`,{method:"GET",headers:l});if(!u.ok)throw new Error("Failed to fetch story");return await u.json()}catch(s){throw console.error("Error fetching story:",s),s}}async addStory(n,s,l=null,u=null){try{const h=new FormData;h.append("description",n),h.append("photo",s),l!==null&&u!==null&&(h.append("lat",l),h.append("lon",u));const f=localStorage.getItem("auth_token"),_={};f&&(_.Authorization=`Bearer ${f}`);const w=await fetch(`${this.baseURL}/stories`,{method:"POST",headers:_,body:h});if(!w.ok){const x=await w.json();throw new Error(x.message||"Failed to add story")}return await w.json()}catch(h){throw console.error("Error adding story:",h),h}}async register(n,s,l){try{const u=await fetch(`${this.baseURL}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:s,password:l})});if(!u.ok){const h=await u.json();throw new Error(h.message||"Registration failed")}return await u.json()}catch(u){throw console.error("Error registering:",u),u}}async login(n,s){try{const l=await fetch(`${this.baseURL}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:s})});if(!l.ok){const u=await l.json();throw new Error(u.message||"Login failed")}return await l.json()}catch(l){throw console.error("Error logging in:",l),l}}}const Ar="dicoding_stories";function Bn(){try{const o=localStorage.getItem(Ar);return o?JSON.parse(o):[]}catch(o){return console.error("Error reading local stories:",o),[]}}function Br(o){try{const n=Bn();return n.push({...o,id:`local-${Date.now()}`,createdAt:new Date().toISOString()}),localStorage.setItem(Ar,JSON.stringify(n)),n}catch(n){return console.error("Error saving local story:",n),[]}}class id{constructor(){this.api=new Qe,this.stories=[],this.loading=!1,this.error=null}async fetchStories(n=1,s=50,l=0){var u;this.loading=!0,this.error=null;try{const h=await this.api.fetchAllStories(n,s,l);if(h&&h.error===!1&&h.listStory)return this.stories=h.listStory,{success:!0,stories:this.stories};{const f=Bn();return this.stories=f,{success:!0,stories:this.stories,isLocal:!0,message:"Menampilkan cerita lokal"}}}catch(h){this.error=h.message;const f=Bn();return this.stories=f,{success:f.length>0,stories:this.stories,isLocal:!0,error:h.message,isAuthError:(u=h.message)==null?void 0:u.includes("401")}}finally{this.loading=!1}}async addStory(n,s,l=null,u=null){this.loading=!0,this.error=null;try{const h=await this.api.addStory(n,s,l,u);if(h.error===!1){if(s){const f=new FileReader;f.onload=_=>{Br({name:"User",description:n,photoUrl:_.target.result,lat:l,lon:u})},f.readAsDataURL(s)}return{success:!0,message:"Cerita berhasil ditambahkan!"}}else throw new Error(h.message||"Gagal menambahkan cerita")}catch(h){return this.error=h.message,{success:!1,error:h.message}}finally{this.loading=!1}}getStoriesWithLocation(){const n=this.stories.filter(s=>{const l=s.lat!==null&&s.lat!==void 0&&s.lat!=="",u=s.lon!==null&&s.lon!==void 0&&s.lon!=="";return l&&u});return console.log("Total stories:",this.stories.length),console.log("Stories with location:",n.length),console.log("Stories data:",this.stories.map(s=>({id:s.id,name:s.name,lat:s.lat,lon:s.lon,hasLocation:s.lat&&s.lon}))),n}getStoryById(n){return this.stories.find(s=>s.id===n)}isLoading(){return this.loading}getError(){return this.error}getStories(){return this.stories}}const Mn=(o,n)=>n.some(s=>o instanceof s);let Es,As;function nd(){return Es||(Es=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function od(){return As||(As=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const In=new WeakMap,Cn=new WeakMap,Ni=new WeakMap;function sd(o){const n=new Promise((s,l)=>{const u=()=>{o.removeEventListener("success",h),o.removeEventListener("error",f)},h=()=>{s(ne(o.result)),u()},f=()=>{l(o.error),u()};o.addEventListener("success",h),o.addEventListener("error",f)});return Ni.set(n,o),n}function rd(o){if(In.has(o))return;const n=new Promise((s,l)=>{const u=()=>{o.removeEventListener("complete",h),o.removeEventListener("error",f),o.removeEventListener("abort",f)},h=()=>{s(),u()},f=()=>{l(o.error||new DOMException("AbortError","AbortError")),u()};o.addEventListener("complete",h),o.addEventListener("error",f),o.addEventListener("abort",f)});In.set(o,n)}let On={get(o,n,s){if(o instanceof IDBTransaction){if(n==="done")return In.get(o);if(n==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ne(o[n])},set(o,n,s){return o[n]=s,!0},has(o,n){return o instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in o}};function Mr(o){On=o(On)}function ad(o){return od().includes(o)?function(...n){return o.apply(zn(this),n),ne(this.request)}:function(...n){return ne(o.apply(zn(this),n))}}function ld(o){return typeof o=="function"?ad(o):(o instanceof IDBTransaction&&rd(o),Mn(o,nd())?new Proxy(o,On):o)}function ne(o){if(o instanceof IDBRequest)return sd(o);if(Cn.has(o))return Cn.get(o);const n=ld(o);return n!==o&&(Cn.set(o,n),Ni.set(n,o)),n}const zn=o=>Ni.get(o);function cd(o,n,{blocked:s,upgrade:l,blocking:u,terminated:h}={}){const f=indexedDB.open(o,n),_=ne(f);return l&&f.addEventListener("upgradeneeded",w=>{l(ne(f.result),w.oldVersion,w.newVersion,ne(f.transaction),w)}),s&&f.addEventListener("blocked",w=>s(w.oldVersion,w.newVersion,w)),_.then(w=>{h&&w.addEventListener("close",()=>h()),u&&w.addEventListener("versionchange",x=>u(x.oldVersion,x.newVersion,x))}).catch(()=>{}),_}const ud=["get","getKey","getAll","getAllKeys","count"],dd=["put","add","delete","clear"],Sn=new Map;function Bs(o,n){if(!(o instanceof IDBDatabase&&!(n in o)&&typeof n=="string"))return;if(Sn.get(n))return Sn.get(n);const s=n.replace(/FromIndex$/,""),l=n!==s,u=dd.includes(s);if(!(s in(l?IDBIndex:IDBObjectStore).prototype)||!(u||ud.includes(s)))return;const h=async function(f,..._){const w=this.transaction(f,u?"readwrite":"readonly");let x=w.store;return l&&(x=x.index(_.shift())),(await Promise.all([x[s](..._),u&&w.done]))[0]};return Sn.set(n,h),h}Mr(o=>({...o,get:(n,s,l)=>Bs(n,s)||o.get(n,s,l),has:(n,s)=>!!Bs(n,s)||o.has(n,s)}));const hd=["continue","continuePrimaryKey","advance"],Ms={},Dn=new WeakMap,Ir=new WeakMap,fd={get(o,n){if(!hd.includes(n))return o[n];let s=Ms[n];return s||(s=Ms[n]=function(...l){Dn.set(this,Ir.get(this)[n](...l))}),s}};async function*md(...o){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...o)),!n)return;n=n;const s=new Proxy(n,fd);for(Ir.set(s,n),Ni.set(s,zn(n));n;)yield s,n=await(Dn.get(s)||n.continue()),Dn.delete(s)}function Is(o,n){return n===Symbol.asyncIterator&&Mn(o,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&Mn(o,[IDBIndex,IDBObjectStore])}Mr(o=>({...o,get(n,s,l){return Is(n,s)?md:o.get(n,s,l)},has(n,s){return Is(n,s)||o.has(n,s)}}));const Os="berbagi-story-db",zs=1,dt="favorite-stories",ht="offline-stories";class pd{constructor(){this.dbPromise=this.initDB()}async initDB(){return cd(Os,zs,{upgrade(n,s,l,u){if(!n.objectStoreNames.contains(dt)){const h=n.createObjectStore(dt,{keyPath:"id"});h.createIndex("name","name",{unique:!1}),h.createIndex("createdAt","createdAt",{unique:!1}),h.createIndex("savedAt","savedAt",{unique:!1})}if(!n.objectStoreNames.contains(ht)){const h=n.createObjectStore(ht,{keyPath:"id",autoIncrement:!0});h.createIndex("createdAt","createdAt",{unique:!1}),h.createIndex("synced","synced",{unique:!1})}}})}async addFavoriteStory(n){const s=await this.dbPromise,l={...n,savedAt:new Date().toISOString()};return s.add(dt,l)}async getAllFavoriteStories(){return(await this.dbPromise).getAll(dt)}async getFavoriteStoryById(n){return(await this.dbPromise).get(dt,n)}async deleteFavoriteStory(n){return(await this.dbPromise).delete(dt,n)}async isFavorite(n){return!!await(await this.dbPromise).get(dt,n)}async searchFavoriteStories(n){const l=await(await this.dbPromise).getAll(dt);if(!n||n.trim()==="")return l;const u=n.toLowerCase();return l.filter(h=>{var f,_;return((f=h.name)==null?void 0:f.toLowerCase().includes(u))||((_=h.description)==null?void 0:_.toLowerCase().includes(u))})}async sortFavoriteStories(n="savedAt",s="desc"){return(await(await this.dbPromise).getAll(dt)).sort((h,f)=>{const _=h[n],w=f[n];return s==="asc"?_>w?1:-1:_<w?1:-1})}async filterFavoriteStories(n){return(await(await this.dbPromise).getAll(dt)).filter(n)}async addOfflineStory(n){const s=await this.dbPromise,l={...n,createdAt:new Date().toISOString(),synced:!1};return s.add(ht,l)}async getAllOfflineStories(){return(await this.dbPromise).getAll(ht)}async getUnsyncedStories(){return(await(await this.dbPromise).getAll(ht)).filter(l=>!l.synced)}async markStorySynced(n){const s=await this.dbPromise,l=await s.get(ht,n);if(l)return l.synced=!0,l.syncedAt=new Date().toISOString(),s.put(ht,l)}async deleteOfflineStory(n){return(await this.dbPromise).delete(ht,n)}async clearSyncedStories(){const s=(await this.dbPromise).transaction(ht,"readwrite"),l=s.objectStore(ht),h=(await l.getAll()).filter(f=>f.synced).map(f=>l.delete(f.id));return await Promise.all(h),s.done}async clearAllData(){const s=(await this.dbPromise).transaction([dt,ht],"readwrite");return await Promise.all([s.objectStore(dt).clear(),s.objectStore(ht).clear()]),s.done}async getStorageInfo(){const n=await this.dbPromise,s=await n.count(dt),l=await n.count(ht);return{totalFavorites:s,totalOfflineStories:l,dbName:Os,dbVersion:zs}}}const Ht=new pd;class gd{constructor(){this.container=null,this.favoriteStates=new Map}async initFavoriteStates(n){for(const s of n){const l=await Ht.isFavorite(s.id);this.favoriteStates.set(s.id,l)}}render(){return`
      <div class="stories-container">
        <header class="stories-header">
          <h1><i class="fas fa-book-open"></i> Berbagi Cerita</h1>
          <p>Jelajahi cerita menarik dari berbagai lokasi</p>
        </header>
        
        <div class="stories-layout">
          <section class="stories-list" aria-label="Daftar cerita">
            <div class="loading" id="loading">
              <i class="fas fa-spinner fa-spin"></i> Memuat cerita...
            </div>
            <ul class="story-items" id="story-items"></ul>
          </section>
          
          <section class="stories-map" aria-label="Peta lokasi cerita">
            <div id="map" style="height: 600px;"></div>
          </section>
        </div>
      </div>
    `}showLoading(){const n=document.getElementById("loading");n&&(n.style.display="block",n.innerHTML='<i class="fas fa-spinner fa-spin"></i> Memuat cerita...')}hideLoading(){const n=document.getElementById("loading");n&&(n.style.display="none")}showMessage(n,s="info",l=!1){const u=document.getElementById("loading");if(!u)return;const h={info:"fas fa-info-circle",success:"fas fa-check-circle",warning:"fas fa-exclamation-triangle",error:"fas fa-times-circle"},f={info:"#d1ecf1",success:"#d4edda",warning:"#fff3cd",error:"#f8d7da"};u.style.display="block",u.innerHTML=`
      <div style="text-align: center; padding: 1rem; background: ${f[s]}; color: #333; border-radius: 8px; margin-bottom: 1rem;">
        <p style="margin: 0;"><i class="${h[s]}"></i> ${n}</p>
      </div>
    `}showEmptyState(n=!1){const s=document.getElementById("loading");s&&(s.innerHTML=`
      <div style="text-align: center; padding: 3rem 2rem; max-width: 600px; margin: 0 auto;">
        <div style="font-size: 4rem; margin-bottom: 1rem;">
          <i class="fas fa-book-open" style="color: #007bff;"></i>
        </div>
        <h2 style="color: #333; margin-bottom: 1rem; font-size: 1.5rem;">
          ${n?"Autentikasi Diperlukan":"Belum Ada Cerita"}
        </h2>
        ${n?`
            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin-bottom: 1.5rem; border-radius: 8px;">
              <p style="color: #856404; margin: 0; font-weight: bold; margin-bottom: 0.5rem;">
                <i class="fas fa-exclamation-triangle"></i> Silakan Login Terlebih Dahulu
              </p>
              <p style="color: #856404; margin: 0; font-size: 0.9rem;">
                Untuk melihat cerita dari server, Anda perlu login terlebih dahulu.
              </p>
            </div>
            <a href="#/login" style="display: inline-block; padding: 0.75rem 1.5rem; background-color: #007bff; color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0.5rem;">
              <i class="fas fa-sign-in-alt"></i> Login Sekarang
            </a>
            <p style="color: #999; font-size: 0.85rem; margin-top: 1rem;">atau</p>
            <a href="#/add-story" style="display: inline-block; padding: 0.75rem 1.5rem; background-color: #28a745; color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin-top: 0.5rem;">
              <i class="fas fa-plus"></i> Tambah Cerita Baru
            </a>
          `:`
            <p style="color: #666; margin-bottom: 1.5rem; line-height: 1.6;">
              Jadilah yang pertama menambahkan cerita menarik!
            </p>
            <a href="#/add-story" style="display: inline-block; padding: 0.75rem 1.5rem; background-color: #28a745; color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin-top: 1rem;">
              <i class="fas fa-plus"></i> Tambah Cerita 
            </a>
            <p style="color: #999; font-size: 0.85rem; margin-top: 1rem;">
              Tips: Setelah menambahkan cerita dengan lokasi, kembali ke halaman ini untuk melihatnya di peta!
            </p>
          `}
      </div>
    `)}async renderStoryList(n){const s=document.getElementById("story-items");s&&(await this.initFavoriteStates(n),s.innerHTML=n.map(l=>{const u=this.favoriteStates.get(l.id);return`
        <li class="story-item">
          <article 
            class="story-card" 
            data-story-id="${l.id}" 
            tabindex="0" 
            role="button" 
            aria-label="Cerita dari ${l.name}. Tekan Enter untuk melihat di peta."
            data-lat="${l.lat||""}" 
            data-lon="${l.lon||""}"
          >
            <div class="story-image">
              <img src="${l.photoUrl}" alt="Foto cerita dari ${l.name}" loading="lazy">
              <button 
                class="favorite-button ${u?"active":""}" 
                data-story-id="${l.id}"
                aria-label="${u?"Hapus dari favorit":"Tambahkan ke favorit"}"
                title="${u?"Hapus dari favorit":"Tambahkan ke favorit"}"
              >
                <i class="fas fa-heart"></i>
              </button>
            </div>
            <div class="story-content">
              <h2 class="story-name"><i class="fas fa-user" aria-hidden="true"></i> ${l.name}</h2>
              <p class="story-description">${l.description}</p>
              <time datetime="${l.createdAt}">
                <i class="fas fa-calendar-alt"></i>
                ${new Date(l.createdAt).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}
              </time>
              ${l.lat&&l.lon?`
                <p class="story-location" aria-label="Lokasi">
                  <i class="fas fa-map-marker-alt"></i> ${l.lat.toFixed(4)}, ${l.lon.toFixed(4)}
                </p>
              `:""}
            </div>
          </article>
        </li>
      `}).join(""),this.attachFavoriteListeners(n))}attachFavoriteListeners(n){document.querySelectorAll(".favorite-button").forEach(l=>{l.addEventListener("click",async u=>{u.stopPropagation();const h=l.dataset.storyId,f=n.find(_=>_.id===h);f&&await this.toggleFavorite(l,f)})})}async toggleFavorite(n,s){try{n.classList.contains("active")?(await Ht.deleteFavoriteStory(s.id),n.classList.remove("active"),n.setAttribute("aria-label","Tambahkan ke favorit"),n.setAttribute("title","Tambahkan ke favorit"),this.favoriteStates.set(s.id,!1),I.fire({icon:"info",title:"Dihapus dari Favorit",text:"Cerita telah dihapus dari daftar favorit",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"})):(await Ht.addFavoriteStory(s),n.classList.add("active"),n.setAttribute("aria-label","Hapus dari favorit"),n.setAttribute("title","Hapus dari favorit"),this.favoriteStates.set(s.id,!0),I.fire({icon:"success",title:"Ditambahkan ke Favorit",text:"Cerita berhasil ditambahkan ke favorit",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}))}catch(l){console.error("Error toggling favorite:",l),I.fire({icon:"error",title:"Gagal",text:"Gagal mengubah status favorit",confirmButtonColor:"#007bff"})}}getMapContainer(){return document.getElementById("map")}getStoryCards(){return document.querySelectorAll(".story-card")}highlightStoryCard(n){const s=document.querySelector(`[data-story-id="${n}"]`);s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),s.classList.add("highlight"),setTimeout(()=>s.classList.remove("highlight"),2e3),s.focus())}}function wd(o){const n=o.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),s=n[0],l=n[n.length-1];o.addEventListener("keydown",u=>{if(u.key==="Tab"&&(u.shiftKey?document.activeElement===s&&(u.preventDefault(),l.focus()):document.activeElement===l&&(u.preventDefault(),s.focus())),u.key==="Escape"){const h=document.querySelector(".camera-modal");h&&h.remove();const f=document.querySelector("#navigation-drawer");f&&f.classList.contains("open")&&f.classList.remove("open")}})}it.Icon.Default.mergeOptions({iconUrl:Je,iconRetinaUrl:Ye,shadowUrl:Xe});const vd=new it.Icon({iconUrl:Je,iconRetinaUrl:Ye,shadowUrl:Xe,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28]});class _d{constructor(){this.model=new id,this.view=new gd,this.map=null,this.markers=[]}async render(){return this.view.render()}async afterRender(){await this.loadStories(),this.setupEventListeners()}async loadStories(){this.view.showLoading();try{const n=await this.model.fetchStories(1,50,0);if(n.success){this.view.hideLoading(),n.isLocal&&n.error?this.view.showMessage(" API tidak tersedia. Menampilkan cerita lokal","warning"):n.isLocal&&this.view.showMessage(" Menampilkan cerita yang Anda buat (disimpan lokal)","info");const s=this.model.getStories();s.length>0?(this.view.renderStoryList(s),this.initMap(s),this.setupStoryCardListeners()):(this.view.showEmptyState(n.isAuthError),this.initMap([]))}else n.isAuthError?this.view.showEmptyState(!0):await I.fire({icon:"error",title:"Gagal Memuat Cerita",text:n.error||"Terjadi kesalahan saat memuat cerita",confirmButtonText:"OK",confirmButtonColor:"#007bff"}),this.initMap([])}catch(n){console.error("Error in loadStories:",n),await I.fire({icon:"error",title:"Error",text:"Terjadi kesalahan yang tidak terduga",confirmButtonText:"OK",confirmButtonColor:"#007bff"})}}setupStoryCardListeners(){this.view.getStoryCards().forEach(s=>{s.addEventListener("click",()=>{var f;const l=s.getAttribute("data-story-id"),u=s.getAttribute("data-lat"),h=s.getAttribute("data-lon");if(u&&h){const _=(f=this.markers)==null?void 0:f.find(w=>{var x;return((x=w.storyData)==null?void 0:x.id)===l});_&&(this.map.setView([parseFloat(u),parseFloat(h)],10),_.openPopup())}}),s.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),s.click())})}),wd(document.querySelector(".stories-list"))}setupEventListeners(){}initMap(n){const s=this.view.getMapContainer();if(!s){console.error("Map container not found");return}try{this.map=it.map(s).setView(Ut.DEFAULT_MAP_CENTER,Ut.DEFAULT_MAP_ZOOM);const l={OpenStreetMap:it.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}),"OpenStreetMap DE":it.tileLayer("https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}),"CartoDB Positron":it.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',maxZoom:19}),"CartoDB Dark":it.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',maxZoom:19})};l.OpenStreetMap.addTo(this.map),it.control.layers(l,{},{position:"topright",collapsed:!1}).addTo(this.map),this.markers=[];const u=this.model.getStories(),h=this.model.getStoriesWithLocation();if(console.log("All stories count:",u.length),console.log("Stories with location count:",h.length),u.length===0){const f=document.createElement("div");f.style.cssText="text-align: center; padding: 1rem; color: #666; background: rgba(255,255,255,0.9); border-radius: 8px; margin: 1rem;",f.innerHTML='<i class="fas fa-info-circle"></i> Tidak ada cerita untuk ditampilkan.',s.parentNode.appendChild(f);return}if(u.forEach((f,_)=>{try{let w,x;f.lat&&f.lon?(w=parseFloat(f.lat),x=parseFloat(f.lon)):(w=Ut.DEFAULT_MAP_CENTER[0]+(Math.random()-.5)*.1,x=Ut.DEFAULT_MAP_CENTER[1]+(Math.random()-.5)*.1);const N=it.marker([w,x],{icon:vd}).addTo(this.map).bindPopup(`
              <div class="popup-content">
                <img src="${f.photoUrl}" alt="Foto cerita dari ${f.name}" style="width: 100%; max-width: 200px; border-radius: 4px; margin-bottom: 8px;">
                <strong><i class="fas fa-user"></i> ${f.name}</strong>
                <p>${f.description}</p>
                <time><i class="fas fa-calendar-alt"></i> ${new Date(f.createdAt).toLocaleDateString("id-ID")}</time>
                ${f.lat&&f.lon?`<p style="margin-top: 8px; color: #28a745;"><i class="fas fa-map-marker-alt"></i> ${f.lat.toFixed(4)}, ${f.lon.toFixed(4)}</p>`:'<p style="margin-top: 8px; color: #6c757d;"><i class="fas fa-info-circle"></i> Lokasi tidak tersedia</p>'}
              </div>
            `);N.storyData=f,this.markers.push(N),N.on("click",()=>{this.view.highlightStoryCard(f.id)})}catch(w){console.error("Error adding marker for story:",f.id,w)}}),this.markers.length>0)try{const f=new it.featureGroup(this.markers);this.map.fitBounds(f.getBounds().pad(.3))}catch(f){console.error("Error fitting map bounds:",f)}}catch(l){console.error("Error initializing map:",l)}}}function Or(){return localStorage.getItem("auth_token")}function bd(){return localStorage.getItem("user_name")}function zr(){return!!Or()}function yd(){localStorage.removeItem("auth_token"),localStorage.removeItem("user_name"),console.log(" Logout berhasil, token dihapus dari localStorage")}it.Icon.Default.mergeOptions({iconUrl:Je,iconRetinaUrl:Ye,shadowUrl:Xe});const kd=new it.Icon({iconUrl:Je,iconRetinaUrl:Ye,shadowUrl:Xe,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28]});console.log("Leaflet marker icon URLs (add-story):",{markerIconUrl:Je,markerIconRetinaUrl:Ye,markerShadowUrl:Xe});class xd{constructor(){this.api=new Qe,this.map=null,this.marker=null,this.selectedPosition=null,this.cameraStream=null}async render(){return zr()?`
      <div class="add-story-container">
        <header class="add-story-header">
          <h1>Tambah Cerita Baru</h1>
        </header>
        
        <form id="story-form" class="story-form" aria-label="Form tambah cerita">
          <div class="form-group">
            <label for="description">Deskripsi Cerita *</label>
            <textarea 
              id="description" 
              name="description" 
              rows="5" 
              placeholder="Tuliskan cerita Anda di sini..."
              required
              aria-required="true"
            ></textarea>
            <span class="error-message" id="description-error" aria-live="polite"></span>
          </div>

          <div class="form-group">
            <label for="photo">Foto Cerita *</label>
            <div class="photo-upload-container">
              <input 
                type="file" 
                id="photo" 
                name="photo" 
                accept="image/*" 
                required
                aria-required="true"
                aria-describedby="photo-help"
              >
              <p id="photo-help" class="help-text">Format: JPG, PNG, GIF. Maksimal 1MB</p>
              <button type="button" class="btn-camera" id="camera-btn" aria-label="Ambil foto dari kamera">
                 Ambil Foto dari Kamera
              </button>
            </div>
            <div id="photo-preview" class="photo-preview" aria-live="polite"></div>
            <span class="error-message" id="photo-error" aria-live="polite"></span>
          </div>

          <div class="form-group">
            <label for="location-info">Lokasi (Opsional)</label>
            <p id="location-info" class="location-info">
              Klik pada peta di bawah untuk memilih lokasi cerita
            </p>
            <span class="error-message" id="location-error" aria-live="polite"></span>
          </div>

          <div id="story-map" class="story-map" style="height: 400px;"></div>

          <div class="form-actions">
            <button type="submit" class="btn-submit" aria-label="Kirim cerita">
              Kirim Cerita
            </button>
            <button type="button" class="btn-reset" id="reset-btn" aria-label="Reset form">
              Reset
            </button>
          </div>

          <div id="form-message" class="form-message" aria-live="polite"></div>
        </form>
      </div>
    `:`
        <div class="auth-required-container">
          <div class="auth-required-card">
            <i class="fas fa-lock fa-3x"></i>
            <h2>Login Diperlukan</h2>
            <p>Anda harus login terlebih dahulu untuk membagikan cerita.</p>
            <a href="#/login" class="btn btn-primary">
              <i class="fas fa-sign-in-alt"></i> Login Sekarang
            </a>
          </div>
        </div>
      `}async afterRender(){this.initMap(),this.setupFormHandlers(),this.setupCameraHandler()}initMap(){const n=document.getElementById("story-map");this.map=it.map(n).setView(Ut.DEFAULT_MAP_CENTER,Ut.DEFAULT_MAP_ZOOM),it.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(this.map),navigator.geolocation&&navigator.geolocation.getCurrentPosition(s=>{const{latitude:l,longitude:u}=s.coords;this.map.setView([l,u],13)},()=>{}),this.map.on("click",s=>{const{lat:l,lng:u}=s.latlng;this.selectedPosition={lat:l,lon:u},this.marker&&this.map.removeLayer(this.marker),this.marker=it.marker([l,u],{icon:kd}).addTo(this.map).bindPopup(" Lokasi cerita dipilih").openPopup();const h=document.getElementById("location-info");h.textContent=`Lokasi dipilih: ${l.toFixed(4)}, ${u.toFixed(4)}`,h.classList.add("location-selected")})}setupFormHandlers(){const n=document.getElementById("story-form"),s=document.getElementById("photo"),l=document.getElementById("reset-btn");s.addEventListener("change",u=>{const h=u.target.files[0];h&&(this.validatePhoto(h),this.showPhotoPreview(h))}),n.addEventListener("submit",async u=>{u.preventDefault(),await this.handleSubmit()}),l.addEventListener("click",()=>{this.resetForm()})}setupCameraHandler(){document.getElementById("camera-btn").addEventListener("click",()=>{this.openCamera()})}openCamera(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(n=>{this.cameraStream=n,this.showCameraModal(n)}).catch(n=>{console.error("Error accessing camera:",n),this.showMessage("Tidak dapat mengakses kamera. Pastikan Anda memberikan izin.","error")}):this.showMessage("Browser tidak mendukung akses kamera.","error")}showCameraModal(n){const s=document.createElement("div");s.className="camera-modal",s.innerHTML=`
      <div class="camera-modal-content">
        <video id="camera-video" autoplay></video>
        <div class="camera-controls">
          <button type="button" class="btn-capture" id="capture-btn"> Ambil Foto</button>
          <button type="button" class="btn-cancel" id="cancel-camera-btn">Batal</button>
        </div>
      </div>
    `,document.body.appendChild(s);const l=s.querySelector("#camera-video");l.srcObject=n;const u=s.querySelector("#capture-btn"),h=s.querySelector("#cancel-camera-btn");u.addEventListener("click",()=>{this.capturePhotoFromCamera(l),this.closeCameraModal()}),h.addEventListener("click",()=>{this.closeCameraModal()})}capturePhotoFromCamera(n){const s=document.createElement("canvas");s.width=n.videoWidth,s.height=n.videoHeight,s.getContext("2d").drawImage(n,0,0),s.toBlob(u=>{if(u){const h=new File([u],"camera-photo.jpg",{type:"image/jpeg"}),f=document.getElementById("photo"),_=new DataTransfer;_.items.add(h),f.files=_.files,f.dispatchEvent(new Event("change",{bubbles:!0}))}},"image/jpeg",.9)}closeCameraModal(){this.cameraStream&&(this.cameraStream.getTracks().forEach(s=>s.stop()),this.cameraStream=null);const n=document.querySelector(".camera-modal");n&&n.remove()}validatePhoto(n){const s=document.getElementById("photo-error");return n.size>1024*1024?(s.textContent="Ukuran file terlalu besar. Maksimal 1MB.",!1):n.type.startsWith("image/")?(s.textContent="",!0):(s.textContent="File harus berupa gambar.",!1)}showPhotoPreview(n){const s=document.getElementById("photo-preview"),l=new FileReader;l.onload=u=>{s.innerHTML=`
        <img src="${u.target.result}" alt="Preview foto cerita" style="max-width: 300px; border-radius: 8px;">
      `},l.readAsDataURL(n)}async handleSubmit(){var f,_;const n=document.getElementById("story-form"),s=document.getElementById("description").value.trim(),l=document.getElementById("photo");if(!s){this.showMessage("Deskripsi harus diisi.","error");return}if(!l.files||l.files.length===0){this.showMessage("Foto harus diunggah.","error");return}const u=l.files[0];if(!this.validatePhoto(u))return;const h=n.querySelector('button[type="submit"]');h.disabled=!0,h.textContent="Mengirim...";try{if((await this.api.addStory(s,u,(f=this.selectedPosition)==null?void 0:f.lat,(_=this.selectedPosition)==null?void 0:_.lon)).error===!1){const x=u;if(x){const N=new FileReader;N.onload=U=>{var ae,Ct;const gt=U.target.result;Br({name:"Guest",description:s,photoUrl:gt,lat:(ae=this.selectedPosition)==null?void 0:ae.lat,lon:(Ct=this.selectedPosition)==null?void 0:Ct.lon}),console.log("Story saved to local storage")},N.readAsDataURL(x)}this.showMessage("Cerita berhasil ditambahkan!","success"),this.resetForm(),setTimeout(()=>{window.location.hash="#/stories"},2e3)}}catch(w){this.showMessage(w.message||"Gagal menambahkan cerita. Silakan coba lagi.","error"),console.error(w)}finally{h.disabled=!1,h.textContent="Kirim Cerita"}}showMessage(n,s="info"){const l=document.getElementById("form-message");l.textContent=n,l.className=`form-message ${s}`,s==="success"&&setTimeout(()=>{l.textContent="",l.className="form-message"},3e3)}resetForm(){document.getElementById("story-form").reset(),document.getElementById("photo-preview").innerHTML="",document.getElementById("location-info").textContent="Klik pada peta di bawah untuk memilih lokasi cerita",document.getElementById("location-info").classList.remove("location-selected"),this.marker&&(this.map.removeLayer(this.marker),this.marker=null),this.selectedPosition=null,this.showMessage("")}}class Ld{async render(){return`
      <section class="container about-section">
        <header class="about-header">
          <h1>Tentang Aplikasi Berbagi Cerita</h1>
        </header>

        <article class="about-content">
          <h2>Aplikasi Apa Ini?</h2>
          <p>
            Aplikasi Berbagi Cerita adalah platform interaktif untuk berbagi pengalaman dan cerita 
            bersama komunitas Dicoding. Aplikasi ini memungkinkan pengguna untuk melihat cerita dari 
            berbagai lokasi di seluruh dunia dan menambahkan cerita mereka sendiri dengan foto dan lokasi geografis.
          </p>

          <h2>Fitur Utama</h2>
          <ul class="feature-list">
            <li><strong>Peta Interaktif:</strong> Jelajahi cerita berdasarkan lokasi geografis pada peta digital dengan marker dan popup</li>
            <li><strong>Berbagi Cerita:</strong> Tambahkan cerita baru dengan foto dan pilih lokasi di peta</li>
            <li><strong>Ambil Foto dari Kamera:</strong> Gunakan kamera langsung untuk menangkap momen spesial</li>
            <li><strong>Aksesibilitas:</strong> Dirancang dengan mempertimbangkan aksesibilitas untuk semua pengguna</li>
            <li><strong>Responsif:</strong> Dapat diakses dengan baik di berbagai ukuran layar (mobile, tablet, desktop)</li>
          </ul>

          <h2>Teknologi yang Digunakan</h2>
          <ul class="tech-list">
            <li>JavaScript ES6+ dengan Vite sebagai build tool</li>
            <li>Single-Page Application (SPA) dengan Hash Routing</li>
            <li>Leaflet untuk visualisasi peta digital</li>
            <li>Dicoding Story API untuk backend</li>
            <li>CSS3 untuk styling responsif</li>
          </ul>

          <h2>Cara Menggunakan</h2>
          <ol class="usage-list">
            <li>Pada halaman beranda, klik "Lihat Semua Cerita" untuk melihat cerita-cerita yang ada</li>
            <li>Klik "Tambah Cerita Baru" untuk menambahkan cerita Anda</li>
            <li>Isi deskripsi cerita, unggah foto, dan klik pada peta untuk memilih lokasi</li>
            <li>Atau gunakan tombol "Ambil Foto dari Kamera" untuk mengambil foto langsung</li>
            <li>Klik "Kirim Cerita" untuk mempublikasikan cerita Anda</li>
          </ol>

          <div class="about-footer">
            <p>
              <strong>API Endpoint:</strong> <a href="https://story-api.dicoding.dev/v1" target="_blank" rel="noopener noreferrer">
                https://story-api.dicoding.dev/v1
              </a>
            </p>
          </div>
        </article>
      </section>
    `}async afterRender(){}}class Pd{constructor(){this.api=new Qe}async render(){return`
      <section class="container login-section">
        <div class="login-container">
          <header class="login-header">
            <h1>Masuk ke Berbagi Story</h1>
            <p>Silakan masuk untuk dapat berbagi cerita</p>
          </header>

          <form id="login-form" class="login-form" aria-label="Form login">
            <div class="form-group">
              <label for="email">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                placeholder="nama@email.com"
                required
                aria-required="true"
                aria-describedby="email-help"
              >
              <span id="email-help" class="help-text">Masukkan email yang terdaftar</span>
              <span class="error-message" id="email-error" aria-live="polite"></span>
            </div>

            <div class="form-group">
              <label for="password">Password *</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                placeholder="Masukkan password"
                required
                aria-required="true"
              >
              <span class="error-message" id="password-error" aria-live="polite"></span>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn-submit" aria-label="Masuk">
                Masuk
              </button>
            </div>

            <div id="login-message" class="form-message" aria-live="polite"></div>
          </form>

          <div class="login-footer">
            <p>Belum punya akun? <a href="#/register">Daftar di sini</a></p>
          </div>
        </div>
      </section>
    `}async afterRender(){this.setupFormHandler()}setupFormHandler(){document.getElementById("login-form").addEventListener("submit",async s=>{s.preventDefault(),await this.handleLogin()})}async handleLogin(){var f,_;const n=document.getElementById("login-form"),s=document.getElementById("email").value.trim(),l=document.getElementById("password").value,u=n.querySelector('button[type="submit"]'),h=document.getElementById("login-message");if(!s){h.textContent="Email harus diisi.",h.className="form-message error";return}if(!l){h.textContent="Password harus diisi.",h.className="form-message error";return}u.disabled=!0,u.textContent="Memproses...";try{const w=await this.api.login(s,l);console.log(" Login Response:",JSON.stringify(w,null,2));let x=null,N=null;if(w.loginResult&&w.loginResult.token?(x=w.loginResult.token,N=w.loginResult.name):w.error===!1&&w.data&&w.data.token?(x=w.data.token,N=w.data.name):w.token?(x=w.token,N=((f=w.user)==null?void 0:f.name)||w.name):(_=w.data)!=null&&_.token&&(x=w.data.token,N=w.data.name),x)localStorage.setItem("auth_token",x),localStorage.setItem("user_name",N||"User"),console.log(" Token berhasil disimpan:",x),console.log(" localStorage - auth_token:",localStorage.getItem("auth_token")),console.log(" User name:",N),h.textContent="Login berhasil! Token tersimpan di localStorage.",h.className="form-message success",setTimeout(()=>{window.location.hash="#/"},1e3);else throw console.error(" Token tidak ditemukan dalam response:",w),new Error(w.message||"Token tidak ditemukan dalam response")}catch(w){h.textContent=w.message||"Login gagal. Silakan coba lagi.",h.className="form-message error",console.error(" Login Error:",w)}finally{u.disabled=!1,u.textContent="Masuk"}}}class Cd{constructor(){this.api=new Qe}async render(){return`
      <section class="container register-section">
        <div class="register-container">
          <header class="register-header">
            <h1>Daftar ke Berbagi Story</h1>
            <p>Buat akun untuk mulai berbagi cerita</p>
          </header>

          <form id="register-form" class="register-form" aria-label="Form registrasi">
            <div class="form-group">
              <label for="name">Nama Lengkap *</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                placeholder="Nama lengkap"
                required
                aria-required="true"
              >
              <span class="error-message" id="name-error" aria-live="polite"></span>
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                placeholder="nama@email.com"
                required
                aria-required="true"
                aria-describedby="email-help"
              >
              <span id="email-help" class="help-text">Masukkan email yang valid</span>
              <span class="error-message" id="email-error" aria-live="polite"></span>
            </div>

            <div class="form-group">
              <label for="password">Password *</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                placeholder="Minimal 6 karakter"
                required
                aria-required="true"
                minlength="6"
              >
              <span class="help-text">Minimal 6 karakter</span>
              <span class="error-message" id="password-error" aria-live="polite"></span>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn-submit" aria-label="Daftar">
                Daftar
              </button>
            </div>

            <div id="register-message" class="form-message" aria-live="polite"></div>
          </form>

          <div class="register-footer">
            <p>Sudah punya akun? <a href="#/login">Masuk di sini</a></p>
          </div>
        </div>
      </section>
    `}async afterRender(){this.setupFormHandler()}setupFormHandler(){document.getElementById("register-form").addEventListener("submit",async s=>{s.preventDefault(),await this.handleRegister()})}async handleRegister(){const n=document.getElementById("register-form"),s=document.getElementById("name").value.trim(),l=document.getElementById("email").value.trim(),u=document.getElementById("password").value,h=n.querySelector('button[type="submit"]'),f=document.getElementById("register-message");if(!s){f.textContent="Nama lengkap harus diisi.",f.className="form-message error";return}if(!l){f.textContent="Email harus diisi.",f.className="form-message error";return}if(!u||u.length<6){f.textContent="Password minimal 6 karakter.",f.className="form-message error";return}h.disabled=!0,h.textContent="Memproses...";try{const _=await this.api.register(s,l,u);if(_.error===!1)f.textContent="Registrasi berhasil! Silakan masuk.",f.className="form-message success",setTimeout(()=>{window.location.hash="#/login"},2e3);else throw new Error(_.message||"Registrasi gagal")}catch(_){f.textContent=_.message||"Registrasi gagal. Silakan coba lagi.",f.className="form-message error",console.error(_)}finally{h.disabled=!1,h.textContent="Daftar"}}}const Sd={async render(){return`
      <div class="favorites-page">
        <div class="container">
          <div class="favorites-header">
            <h1><i class="fas fa-heart"></i> Cerita Favorit</h1>
            <p class="subtitle">Kelola cerita favorit Anda yang tersimpan secara offline</p>
          </div>

          <div class="favorites-controls">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <label for="search-favorites" class="visually-hidden">Cari cerita favorit</label>
              <input 
                type="text" 
                id="search-favorites" 
                placeholder="Cari cerita favorit..." 
                aria-describedby="search-favorites-help"
              />
              <span id="search-favorites-help" class="visually-hidden">Ketik untuk mencari cerita favorit berdasarkan nama atau deskripsi</span>
            </div>
            
            <div class="sort-controls">
              <label for="sort-favorites">
                <i class="fas fa-sort"></i> Urutkan:
              </label>
              <select id="sort-favorites" aria-label="Urutkan cerita">
                <option value="savedAt-desc">Terbaru Disimpan</option>
                <option value="savedAt-asc">Terlama Disimpan</option>
                <option value="name-asc">Nama A-Z</option>
                <option value="name-desc">Nama Z-A</option>
              </select>
            </div>

            <button id="clear-favorites" class="btn btn-danger" aria-label="Hapus semua favorit">
              <i class="fas fa-trash-alt"></i> Hapus Semua
            </button>
          </div>

          <div id="favorites-stats" class="favorites-stats"></div>
          <div id="favorites-list" class="favorites-list loading">
            <div class="spinner"></div>
            <p>Memuat cerita favorit...</p>
          </div>
        </div>
      </div>
    `},async afterRender(){await this.loadFavorites(),this.initializeEventListeners()},async loadFavorites(o="",n="savedAt-desc"){const s=document.getElementById("favorites-list"),l=document.getElementById("favorites-stats");try{let u;o?u=await Ht.searchFavoriteStories(o):u=await Ht.getAllFavoriteStories();const[h,f]=n.split("-");if(u=u.sort((_,w)=>{const x=_[h]||"",N=w[h]||"";return f==="asc"?x>N?1:-1:x<N?1:-1}),l.innerHTML=`
        <div class="stats-card">
          <i class="fas fa-heart"></i>
          <div>
            <h3>${u.length}</h3>
            <p>Total Favorit</p>
          </div>
        </div>
        <div class="stats-card">
          <i class="fas fa-database"></i>
          <div>
            <h3>Offline</h3>
            <p>Tersimpan Lokal</p>
          </div>
        </div>
      `,u.length===0){s.innerHTML=`
          <div class="empty-state">
            <i class="fas fa-heart-broken"></i>
            <h3>Belum Ada Favorit</h3>
            <p>${o?"Tidak ada hasil yang cocok dengan pencarian Anda.":"Mulai tambahkan cerita ke favorit dari halaman Stories."}</p>
            <a href="#/stories" class="btn btn-primary">
              <i class="fas fa-book-open"></i> Lihat Stories
            </a>
          </div>
        `;return}s.innerHTML=u.map(_=>`
        <div class="story-card favorite-card" data-story-id="${_.id}">
          <div class="story-image">
            ${_.photoUrl?`
              <img src="${_.photoUrl}" alt="${_.name}" loading="lazy" />
            `:`
              <div class="no-image">
                <i class="fas fa-image"></i>
              </div>
            `}
          </div>
          
          <div class="story-content">
            <div class="story-header">
              <h2>${_.name}</h2>
              <span class="favorite-badge" title="Favorit">
                <i class="fas fa-heart"></i>
              </span>
            </div>
            
            <p class="story-description">${_.description}</p>
            
            <div class="story-meta">
              <span title="Tanggal dibuat">
                <i class="fas fa-calendar"></i> 
                ${new Date(_.createdAt).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}
              </span>
              <span title="Disimpan pada">
                <i class="fas fa-bookmark"></i> 
                ${new Date(_.savedAt).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}
              </span>
            </div>

            ${_.lat&&_.lon?`
              <div class="story-location">
                <i class="fas fa-map-marker-alt"></i>
                <span>Lokasi: ${_.lat.toFixed(4)}, ${_.lon.toFixed(4)}</span>
              </div>
            `:""}
          </div>

          <div class="story-actions">
            <button class="btn btn-danger btn-sm remove-favorite" data-id="${_.id}" aria-label="Hapus dari favorit">
              <i class="fas fa-trash"></i> Hapus
            </button>
          </div>
        </div>
      `).join(""),document.querySelectorAll(".remove-favorite").forEach(_=>{_.addEventListener("click",async w=>{w.stopPropagation();const x=_.dataset.id;await this.removeFavorite(x)})})}catch(u){console.error("Error loading favorites:",u),s.innerHTML=`
        <div class="error-state">
          <i class="fas fa-exclamation-triangle"></i>
          <h3>Gagal Memuat Favorit</h3>
          <p>Terjadi kesalahan saat memuat cerita favorit.</p>
          <button class="btn btn-primary" onclick="location.reload()">
            <i class="fas fa-redo"></i> Muat Ulang
          </button>
        </div>
      `}},async removeFavorite(o){var s,l;if((await I.fire({title:"Hapus Favorit?",text:"Cerita ini akan dihapus dari daftar favorit Anda.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-trash"></i> Ya, Hapus',cancelButtonText:'<i class="fas fa-times"></i> Batal'})).isConfirmed)try{await Ht.deleteFavoriteStory(o),await I.fire({icon:"success",title:"Berhasil",text:"Cerita telah dihapus dari favorit",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"});const u=((s=document.getElementById("search-favorites"))==null?void 0:s.value)||"",h=((l=document.getElementById("sort-favorites"))==null?void 0:l.value)||"savedAt-desc";await this.loadFavorites(u,h)}catch(u){console.error("Error removing favorite:",u),I.fire({icon:"error",title:"Gagal",text:"Gagal menghapus cerita dari favorit",confirmButtonColor:"#007bff"})}},async clearAllFavorites(){if((await I.fire({title:"Hapus Semua Favorit?",text:"Semua cerita favorit akan dihapus. Tindakan ini tidak dapat dibatalkan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-trash"></i> Ya, Hapus Semua',cancelButtonText:'<i class="fas fa-times"></i> Batal'})).isConfirmed)try{const n=await Ht.getAllFavoriteStories();for(const s of n)await Ht.deleteFavoriteStory(s.id);await I.fire({icon:"success",title:"Berhasil",text:"Semua cerita favorit telah dihapus",timer:2e3,showConfirmButton:!1}),await this.loadFavorites()}catch(n){console.error("Error clearing favorites:",n),I.fire({icon:"error",title:"Gagal",text:"Gagal menghapus cerita favorit",confirmButtonColor:"#007bff"})}},initializeEventListeners(){const o=document.getElementById("search-favorites");if(o){let l;o.addEventListener("input",u=>{clearTimeout(l),l=setTimeout(()=>{var f;const h=((f=document.getElementById("sort-favorites"))==null?void 0:f.value)||"savedAt-desc";this.loadFavorites(u.target.value,h)},300)})}const n=document.getElementById("sort-favorites");n&&n.addEventListener("change",l=>{var h;const u=((h=document.getElementById("search-favorites"))==null?void 0:h.value)||"";this.loadFavorites(u,l.target.value)});const s=document.getElementById("clear-favorites");s&&s.addEventListener("click",()=>{this.clearAllFavorites()})}};class Td{constructor(){this.isSupported="serviceWorker"in navigator&&"PushManager"in window,this.registration=null,this.subscription=null}async init(){if(!this.isSupported)return console.warn("Push notifications are not supported in this browser"),!1;try{return this.registration=await navigator.serviceWorker.ready,this.subscription=await this.registration.pushManager.getSubscription(),this.updateSubscriptionUI(),!0}catch(n){return console.error("Error initializing push notifications:",n),!1}}async requestPermission(){if(!this.isSupported)throw new Error("Push notifications are not supported");const n=await Notification.requestPermission();return console.log("Notification permission:",n),n==="granted"}async subscribe(){try{console.log("=== SUBSCRIBE START ==="),this.registration||(console.log("Initializing service worker..."),await this.init()),console.log("Checking existing subscription...");const n=await this.registration.pushManager.getSubscription();if(n){console.log("Already subscribed to push notifications"),this.subscription=n;try{await this.sendSubscriptionToServer(n)}catch(u){console.warn("Failed to sync existing subscription with server:",u)}return n}if(console.log("Current permission:",Notification.permission),Notification.permission!=="granted"){if(console.log("Requesting notification permission..."),!await this.requestPermission())throw new Error("User denied notification permission");console.log("Permission granted!")}console.log("Getting VAPID key...");const s=await this.getVapidPublicKey();console.log("VAPID key obtained"),console.log("Subscribing to push service...");const l=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(s)});return console.log("Push subscription successful!"),console.log("Subscription endpoint:",l.endpoint),this.subscription=l,console.log("Sending subscription to server..."),await this.sendSubscriptionToServer(l),console.log("=== SUBSCRIBE COMPLETE ==="),this.updateSubscriptionUI(),l}catch(n){throw console.error("=== SUBSCRIBE ERROR ==="),console.error("Error details:",n),console.error("Error message:",n.message),console.error("Error stack:",n.stack),n}}async unsubscribe(){try{if(!this.subscription)return console.log("No active subscription to unsubscribe"),!0;const n=localStorage.getItem("auth_token");if(n)try{const l=await fetch(`${Ut.BASE_URL}/notifications/subscribe`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({endpoint:this.subscription.endpoint})});if(l.ok){const u=await l.json();console.log("Server unsubscribe response:",u)}}catch(l){console.error("Error unsubscribing from server:",l)}const s=await this.subscription.unsubscribe();return s&&(console.log("Successfully unsubscribed from push notifications"),this.subscription=null,localStorage.removeItem("push_subscription"),this.updateSubscriptionUI()),s}catch(n){throw console.error("Error unsubscribing from push notifications:",n),n}}async getVapidPublicKey(){return"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk"}async sendSubscriptionToServer(n){try{console.log("Sending subscription to server..."),console.log("Subscription endpoint:",n.endpoint);const s=localStorage.getItem("auth_token");if(!s)throw console.log("No auth token, cannot subscribe to server"),new Error("Authentication required to subscribe to notifications. Please login first.");const l=btoa(String.fromCharCode(...new Uint8Array(n.getKey("p256dh")))),u=btoa(String.fromCharCode(...new Uint8Array(n.getKey("auth"))));console.log("Payload being sent:",{endpoint:n.endpoint.substring(0,50)+"...",keys:{p256dh:l.substring(0,20)+"...",auth:u.substring(0,20)+"..."}});const h=new AbortController,f=setTimeout(()=>h.abort(),15e3);try{const _=await fetch(`${Ut.BASE_URL}/notifications/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({endpoint:n.endpoint,keys:{p256dh:l,auth:u}}),signal:h.signal});if(clearTimeout(f),console.log("Server response status:",_.status),!_.ok){const x=await _.json().catch(()=>({message:"Unknown error"}));throw console.error("Subscribe error response:",x),new Error(x.message||`Failed to subscribe: ${_.status} ${_.statusText}`)}const w=await _.json();return console.log("Successfully subscribed to server notifications:",w),localStorage.setItem("push_subscription",JSON.stringify({endpoint:n.endpoint,subscribedAt:new Date().toISOString()})),w}catch(_){throw clearTimeout(f),_.name==="AbortError"?new Error("Request timeout - Server tidak merespon dalam 15 detik"):_}}catch(s){throw console.error("Error sending subscription to server:",s),s}}isSubscribed(){return this.subscription!==null}getSubscriptionState(){return{isSupported:this.isSupported,permission:Notification.permission,isSubscribed:this.isSubscribed(),subscription:this.subscription}}updateSubscriptionUI(){const n=document.getElementById("push-notification-toggle");if(n){const l=this.isSubscribed();n.checked=l;const u=document.querySelector('label[for="push-notification-toggle"]');if(u){const h=u.querySelector("span")||u;h.textContent=l?"Notifikasi Push Aktif":"Notifikasi Push Nonaktif"}}const s=document.getElementById("notification-status");s&&(this.isSubscribed()?(s.textContent=" Notifikasi aktif",s.className="notification-status active"):(s.textContent=" Notifikasi nonaktif",s.className="notification-status inactive"))}urlBase64ToUint8Array(n){const s="=".repeat((4-n.length%4)%4),l=(n+s).replace(/\-/g,"+").replace(/_/g,"/"),u=window.atob(l),h=new Uint8Array(u.length);for(let f=0;f<u.length;++f)h[f]=u.charCodeAt(f);return h}async sendTestNotification(){Notification.permission==="granted"&&this.registration&&this.registration.showNotification("Test Notifikasi",{body:"Ini adalah notifikasi percobaan dari Berbagi Story",icon:"./icons/icon-192x192.png",badge:"./icons/icon-96x96.png",vibrate:[200,100,200],data:{url:"./#/stories"}})}}const Rt=new Td,Ed={async render(){return`
      <div class="settings-page">
        <div class="container">
          <div class="settings-header">
            <h1><i class="fas fa-cog"></i> Pengaturan</h1>
            <p class="subtitle">Kelola preferensi dan notifikasi aplikasi</p>
          </div>

          <div class="settings-content">
            <!-- Push Notification Settings -->
            <div class="settings-section">
              <h2><i class="fas fa-bell"></i> Notifikasi Push</h2>
              <p class="section-description">
                Terima notifikasi ketika ada cerita baru yang dibagikan
              </p>

              ${!!localStorage.getItem("auth_token")?`
                <div class="alert alert-info">
                  <i class="fas fa-info-circle"></i>
                  <div>
                    <p><strong>Cara Kerja Push Notification:</strong></p>
                    <ol>
                      <li>Klik tombol "Subscribe" untuk mendaftar notifikasi</li>
                      <li>Izinkan notifikasi saat browser meminta</li>
                      <li>Tambahkan story baru untuk memicu notifikasi</li>
                      <li>Notifikasi akan muncul otomatis dari server</li>
                    </ol>
                  </div>
                </div>

                <div class="notification-controls">
                  <button id="subscribe-notification" class="btn btn-primary ${Rt.isSubscribed()?"hidden":""}">
                    <i class="fas fa-bell"></i> Subscribe Notifikasi
                  </button>
                  
                  <button id="unsubscribe-notification" class="btn btn-warning ${Rt.isSubscribed()?"":"hidden"}">
                    <i class="fas fa-bell-slash"></i> Unsubscribe Notifikasi
                  </button>

                  <button id="test-notification" class="btn btn-secondary ${Rt.isSubscribed()?"":"disabled"}" ${Rt.isSubscribed()?"":"disabled"}>
                    <i class="fas fa-vial"></i> Coba Notifikasi
                  </button>
                </div>

                <div id="notification-status" class="notification-status">
                  ${this.getNotificationStatusHTML()}
                </div>
              `:`
                <div class="alert alert-warning">
                  <i class="fas fa-exclamation-triangle"></i>
                  <div>
                    <strong>Login Diperlukan</strong>
                    <p>Anda harus login terlebih dahulu untuk mengaktifkan notifikasi push.</p>
                    <a href="#/login" class="btn btn-primary btn-sm">
                      <i class="fas fa-sign-in-alt"></i> Login Sekarang
                    </a>
                  </div>
                </div>
              `}
            </div>

            <!-- Storage Info -->
            <div class="settings-section">
              <h2><i class="fas fa-database"></i> Penyimpanan</h2>
              <p class="section-description">
                Informasi tentang data yang tersimpan secara offline
              </p>

              <div id="storage-info" class="storage-info">
                <div class="spinner"></div>
                <p>Memuat informasi penyimpanan...</p>
              </div>

              <button id="clear-cache" class="btn btn-warning">
                <i class="fas fa-broom"></i> Bersihkan Cache
              </button>
            </div>

            <!-- App Info -->
            <div class="settings-section">
              <h2><i class="fas fa-info-circle"></i> Informasi Aplikasi</h2>
              
              <div class="app-info">
                <div class="info-item">
                  <i class="fas fa-check-circle"></i>
                  <div>
                    <strong>Status PWA</strong>
                    <span id="pwa-status">Terinstal</span>
                  </div>
                </div>

                <div class="info-item">
                  <i class="fas fa-wifi"></i>
                  <div>
                    <strong>Status Koneksi</strong>
                    <span id="connection-status">${navigator.onLine?"Online":"Offline"}</span>
                  </div>
                </div>

                <div class="info-item">
                  <i class="fas fa-mobile-alt"></i>
                  <div>
                    <strong>Versi</strong>
                    <span>1.0.0</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- About -->
            <div class="settings-section">
              <h2><i class="fas fa-heart"></i> Tentang</h2>
              <p>
                <strong>Berbagi Story</strong> adalah aplikasi Progressive Web App 
                untuk berbagi cerita dengan lokasi. Dikembangkan sebagai bagian dari 
                submission Dicoding Academy.
              </p>
              <div class="about-links">
                <a href="#/about" class="btn btn-link">
                  <i class="fas fa-info"></i> Selengkapnya
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    `},async afterRender(){await this.loadStorageInfo(),this.initializeEventListeners(),this.updateConnectionStatus(),window.addEventListener("online",()=>this.updateConnectionStatus()),window.addEventListener("offline",()=>this.updateConnectionStatus())},getNotificationStatusHTML(){const o=Rt.getSubscriptionState();return o.isSupported?o.permission==="denied"?`
        <div class="status-badge status-error">
          <i class="fas fa-ban"></i>
          Notifikasi diblokir. Aktifkan di pengaturan browser.
        </div>
      `:o.isSubscribed?`
        <div class="status-badge status-success">
          <i class="fas fa-check-circle"></i>
          Notifikasi push aktif
        </div>
      `:`
      <div class="status-badge status-warning">
        <i class="fas fa-exclamation-circle"></i>
        Notifikasi push nonaktif
      </div>
    `:`
        <div class="status-badge status-error">
          <i class="fas fa-times-circle"></i>
          Notifikasi push tidak didukung di browser ini
        </div>
      `},async loadStorageInfo(){const o=document.getElementById("storage-info");try{const n=await Ht.getStorageInfo();let s="N/A";if("storage"in navigator&&"estimate"in navigator.storage){const l=await navigator.storage.estimate(),u=(l.usage/1024/1024).toFixed(2),h=(l.quota/1024/1024).toFixed(2);s=`${u} MB / ${h} MB`}o.innerHTML=`
        <div class="storage-stats">
          <div class="stat-card">
            <i class="fas fa-heart"></i>
            <div>
              <h3>${n.totalFavorites}</h3>
              <p>Cerita Favorit</p>
            </div>
          </div>

          <div class="stat-card">
            <i class="fas fa-clock"></i>
            <div>
              <h3>${n.totalOfflineStories}</h3>
              <p>Cerita Offline</p>
            </div>
          </div>

          <div class="stat-card">
            <i class="fas fa-hdd"></i>
            <div>
              <h3>${s}</h3>
              <p>Penggunaan Cache</p>
            </div>
          </div>
        </div>
      `}catch(n){console.error("Error loading storage info:",n),o.innerHTML=`
        <div class="error-message">
          <i class="fas fa-exclamation-triangle"></i>
          Gagal memuat informasi penyimpanan
        </div>
      `}},updateConnectionStatus(){const o=document.getElementById("connection-status");o&&(navigator.onLine?(o.textContent="Online",o.className="status-online"):(o.textContent="Offline",o.className="status-offline"))},initializeEventListeners(){const o=document.getElementById("subscribe-notification");o&&o.addEventListener("click",async()=>{await this.enablePushNotifications()});const n=document.getElementById("unsubscribe-notification");n&&n.addEventListener("click",async()=>{await this.disablePushNotifications()});const s=document.getElementById("test-notification");s&&s.addEventListener("click",async()=>{await this.sendTestNotification()});const l=document.getElementById("clear-cache");l&&l.addEventListener("click",async()=>{await this.clearCache()})},async enablePushNotifications(){try{const o=I.fire({title:"Subscribing...",text:"Mohon tunggu, mendaftarkan notifikasi push",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,willOpen:()=>{I.showLoading()}});await Rt.subscribe(),o.close(),await I.fire({icon:"success",title:"Berhasil Subscribe!",html:`
          <p>Notifikasi push telah diaktifkan.</p>
          <p><strong>Cara Test:</strong></p>
          <ol style="text-align: left;">
            <li>Tambahkan story baru di menu "Tambah Story"</li>
            <li>Notifikasi akan muncul otomatis dari server</li>
          </ol>
        `,confirmButtonColor:"#007bff"});const n=document.getElementById("subscribe-notification"),s=document.getElementById("unsubscribe-notification"),l=document.getElementById("test-notification");n&&n.classList.add("hidden"),s&&s.classList.remove("hidden"),l&&(l.disabled=!1);const u=document.getElementById("notification-status");u&&(u.innerHTML=this.getNotificationStatusHTML())}catch(o){throw console.error("Error enabling push notifications:",o),I.fire({icon:"error",title:"Gagal Subscribe",text:o.message||"Gagal mengaktifkan notifikasi push",confirmButtonColor:"#007bff"}),o}},async disablePushNotifications(){try{if(!(await I.fire({title:"Unsubscribe Notifikasi?",text:"Anda tidak akan menerima notifikasi push lagi",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-bell-slash"></i> Ya, Unsubscribe',cancelButtonText:'<i class="fas fa-times"></i> Batal'})).isConfirmed)return;await Rt.unsubscribe(),await I.fire({icon:"info",title:"Berhasil Unsubscribe",text:"Notifikasi push telah dinonaktifkan",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"});const n=document.getElementById("subscribe-notification"),s=document.getElementById("unsubscribe-notification"),l=document.getElementById("test-notification");n&&n.classList.remove("hidden"),s&&s.classList.add("hidden"),l&&(l.disabled=!0);const u=document.getElementById("notification-status");u&&(u.innerHTML=this.getNotificationStatusHTML())}catch(o){throw console.error("Error disabling push notifications:",o),I.fire({icon:"error",title:"Gagal",text:"Gagal unsubscribe notifikasi",confirmButtonColor:"#007bff"}),o}},async sendTestNotification(){try{await Rt.sendTestNotification(),I.fire({icon:"success",title:"Notifikasi Terkirim",text:"Cek notifikasi Anda!",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"})}catch(o){console.error("Error sending test notification:",o),I.fire({icon:"error",title:"Gagal",text:"Gagal mengirim notifikasi percobaan",confirmButtonColor:"#007bff"})}},async clearCache(){if((await I.fire({title:"Bersihkan Cache?",text:"Data cache akan dihapus. Aplikasi akan memuat ulang data dari server.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ffc107",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-broom"></i> Ya, Bersihkan',cancelButtonText:'<i class="fas fa-times"></i> Batal'})).isConfirmed)try{if("caches"in window){const n=await caches.keys();await Promise.all(n.map(s=>caches.delete(s)))}await I.fire({icon:"success",title:"Berhasil!",text:"Cache telah dibersihkan. Halaman akan dimuat ulang.",timer:2e3,showConfirmButton:!1}),setTimeout(()=>{window.location.reload()},2e3)}catch(n){console.error("Error clearing cache:",n),I.fire({icon:"error",title:"Gagal",text:"Gagal membersihkan cache",confirmButtonColor:"#007bff"})}}},Ad={"/":new Qu,"/stories":new _d,"/add-story":new xd,"/favorites":Sd,"/settings":Ed,"/about":new Ld,"/login":new Pd,"/register":new Cd};function Bd(o){const n=o.split("/");return{resource:n[1]||null,id:n[2]||null}}function Md(o){let n="";return o.resource&&(n=n.concat(`/${o.resource}`)),o.id&&(n=n.concat("/:id")),n||"/"}function Id(){return location.hash.replace("#","")||"/"}function Od(){const o=Id(),n=Bd(o);return Md(n)}var be,ee,Ft,Bi,Dr;class zd{constructor({navigationDrawer:n,drawerButton:s,content:l}){Ue(this,Bi);Ue(this,be,null);Ue(this,ee,null);Ue(this,Ft,null);bi(this,be,l),bi(this,ee,s),bi(this,Ft,n),gs(this,Bi,Dr).call(this)}async renderPage(){const n=Od(),s=Ad[n];document.startViewTransition?document.startViewTransition(async()=>{Pt(this,be).innerHTML=await s.render(),await s.afterRender()}):(Pt(this,be).innerHTML=await s.render(),await s.afterRender())}}be=new WeakMap,ee=new WeakMap,Ft=new WeakMap,Bi=new WeakSet,Dr=function(){Pt(this,ee).addEventListener("click",()=>{const n=Pt(this,Ft).classList.toggle("open");Pt(this,ee).setAttribute("aria-expanded",n)}),document.body.addEventListener("click",n=>{!Pt(this,Ft).contains(n.target)&&!Pt(this,ee).contains(n.target)&&Pt(this,Ft).classList.remove("open"),Pt(this,Ft).querySelectorAll("a").forEach(s=>{s.contains(n.target)&&Pt(this,Ft).classList.remove("open")})})};class Dd{constructor(){this.api=new Qe,this.loading=!1,this.error=null}async login(n,s){this.loading=!0,this.error=null;try{const l=await this.api.login(n,s);if(l.error===!1&&l.loginResult){const{token:u,name:h}=l.loginResult;return localStorage.setItem("auth_token",u),localStorage.setItem("user_name",h),{success:!0,token:u,name:h}}else throw new Error(l.message||"Login gagal")}catch(l){return this.error=l.message,{success:!1,error:l.message}}finally{this.loading=!1}}async register(n,s,l){this.loading=!0,this.error=null;try{const u=await this.api.register(n,s,l);if(u.error===!1)return{success:!0,message:u.message||"Registrasi berhasil"};throw new Error(u.message||"Registrasi gagal")}catch(u){return this.error=u.message,{success:!1,error:u.message}}finally{this.loading=!1}}logout(){return yd(),{success:!0}}getCurrentUser(){return{isLoggedIn:zr(),token:Or(),name:bd()}}isLoading(){return this.loading}getError(){return this.error}}"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const o=window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")+1)||"/",n=`${o}sw.js`;console.log("Registering service worker from:",n),console.log("With scope:",o);const s=await navigator.serviceWorker.register(n,{scope:o});console.log("Service Worker registered successfully:",s),await Rt.init(),s.addEventListener("updatefound",()=>{const l=s.installing;console.log("New service worker found, installing..."),l.addEventListener("statechange",()=>{l.state==="installed"&&navigator.serviceWorker.controller&&Nd(l)})})}catch(o){console.error("Service Worker registration failed:",o)}});function Nd(o){I.fire({title:"Pembaruan Tersedia",text:"Versi baru aplikasi telah tersedia. Muat ulang untuk menggunakan versi terbaru?",icon:"info",showCancelButton:!0,confirmButtonText:"Muat Ulang",cancelButtonText:"Nanti",confirmButtonColor:"#007bff"}).then(n=>{n.isConfirmed&&(o.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}let we;window.addEventListener("beforeinstallprompt",o=>{console.log("beforeinstallprompt event fired"),o.preventDefault(),we=o,Zd()});window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),we=null,I.fire({icon:"success",title:"Aplikasi Terinstal!",text:"Berbagi Story telah berhasil diinstal di perangkat Anda",timer:3e3,showConfirmButton:!1,toast:!0,position:"top-end"})});function Zd(){var n,s;const o=document.createElement("div");o.id="install-banner",o.className="install-banner",o.innerHTML=`
    <div class="install-banner-content">
      <div class="install-banner-text">
        <i class="fas fa-download"></i>
        <span>Install aplikasi untuk pengalaman lebih baik!</span>
      </div>
      <div class="install-banner-actions">
        <button id="install-button" class="btn btn-primary btn-sm">
          <i class="fas fa-download"></i> Install
        </button>
        <button id="dismiss-install" class="btn btn-secondary btn-sm">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  `,document.body.appendChild(o),(n=document.getElementById("install-button"))==null||n.addEventListener("click",async()=>{if(!we)return;we.prompt();const{outcome:l}=await we.userChoice;console.log(`User response to the install prompt: ${l}`),we=null,o.remove()}),(s=document.getElementById("dismiss-install"))==null||s.addEventListener("click",()=>{o.remove()})}document.addEventListener("DOMContentLoaded",async()=>{const o=new Dd,n=new zd({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer")});await n.renderPage();const s=()=>{const u=document.querySelector(".login-link");if(!u)return;o.getCurrentUser().isLoggedIn?(u.innerHTML='<i class="fas fa-sign-out-alt"></i> Keluar',u.onclick=async f=>{f.preventDefault(),(await I.fire({title:"Konfirmasi Logout",text:"Apakah Anda yakin ingin keluar?",icon:"question",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:'<i class="fas fa-sign-out-alt"></i> Ya, Keluar',cancelButtonText:'<i class="fas fa-times"></i> Batal'})).isConfirmed&&(o.logout(),s(),location.hash="#/login",await n.renderPage(),await I.fire({icon:"success",title:"Logout Berhasil",text:"Anda telah berhasil logout",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}))},u.setAttribute("href","#/login")):(u.innerHTML='<i class="fas fa-sign-in-alt"></i> Masuk',u.onclick=null,u.setAttribute("href","#/login"))};s(),window.addEventListener("hashchange",async()=>{await n.renderPage(),s()}),window.addEventListener("error",u=>{console.error("Global error:",u.error),I.fire({icon:"error",title:"Terjadi Kesalahan",text:"Aplikasi mengalami kesalahan yang tidak terduga. Silakan refresh halaman.",confirmButtonText:"Refresh Halaman",confirmButtonColor:"#007bff"}).then(h=>{h.isConfirmed&&window.location.reload()})}),window.addEventListener("online",()=>{I.fire({icon:"success",title:"Kembali Online",text:"Koneksi internet telah tersambung kembali",timer:2e3,showConfirmButton:!1,toast:!0,position:"top-end"}),"serviceWorker"in navigator&&"sync"in ServiceWorkerRegistration.prototype&&navigator.serviceWorker.ready.then(u=>u.sync.register("sync-stories")).catch(u=>{console.error("Background sync registration failed:",u)})}),window.addEventListener("offline",()=>{I.fire({icon:"warning",title:"Offline",text:"Anda sedang offline. Beberapa fitur mungkin tidak tersedia.",timer:3e3,showConfirmButton:!1,toast:!0,position:"top-end"})});const l=document.querySelector("#main-content");l&&!l.hasAttribute("tabindex")&&l.setAttribute("tabindex","-1")});
